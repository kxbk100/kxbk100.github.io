# 2019-05-30

- sass的书写

- medium = 500weight
- regular = 400weight
- `<div class="A B"></div>`多重样式 后面覆盖前面的 一些间隔相同的margin可以专门建个样式A，然后在B中写各自的样式，sass即为`A {&.B {XXX}}`
- nunjucks html模板语言
- 比较多的使用yarn进行包管理
- `yarn add XX —dev`

# 2019-05-31

- 某个标签的特殊处理，样式继承

```css
h1 {
      font-size: 24px;
      color: #000000;
      line-height: 30px;
      font-weight: 500;
      &.about {
        margin: 24px 0;
      }
}
```

- a标签等非块级元素margin、padding失效
- 图文列表布局例子https://www.tpt360.com/thread/9.html
- css渐变

# 2019-06-03

- opacity的所有子元素都会继承透明度，可以使用rgba来解决这个问题
- background-image必须设置height和width才能正常显示
- 一个div下多个inline-block出现参差不齐的现象，给inline-block元素加上vertical-align:top;解决
- 文字左边小图标🔗https://blog.csdn.net/sqc157400661/article/details/72457535
- position: fixed可通过设置padding来补偿
- 设置float后不占位，CSS清除浮动的方法🔗https://www.jianshu.com/p/c49c22f22a99
- button可以用a标签然后padding往里挤，块级元素需设置box-sizing: border-box;

# 2019-06-04

- CSS遮罩层
- transction动画，缓动：linear，ease-in，ease-out，ease-in-out
- event.target，返回触发事件的DOM元素，target 属性可以是注册事件时的元素，或者它的子元素。通常用于比较 event.target 和 this 来确定事件是不是由于冒泡而触发的。经常用于事件冒泡时处理事件委托
- 分页的实现

```html
<ul class="pagination">
  <li><a href=""><img src="../img/16.png" alt=""></a></li>
  <li><a class="active" href="#">1</a></li>
  <li><a href="#">2</a></li>
  <li><a href="#">3</a></li>
  <li><a href="#">4</a></li>
  <li><a href="#">5</a></li>
  <li><a href="#"><img src="../img/17.png" alt=""></a></li>
</ul>
```

```css
ul.pagination {
  display: inline-block;
  padding: 0;
  margin-top: 24px;
  margin-bottom: 56px;
  float: right;
  li {
    display: inline;
    a {
      float: left;
      padding: 7px;
      text-decoration: none;
      transition: background-color 0.3s;
      font-size: 14px;
      color: #323233;
      border: 1px solid #dcdee0;
      margin-right: 4px;
      line-height: 18px;
      width: 18px;
      text-align: center;
      border-radius: 3px;
      -moz-border-radius: 3px;
      -webkit-border-radius: 3px;
      img {
        width: 18px;
      }
    }
  }
}

ul.pagination li a.active {
  background-color: #105be6;
  color: white;
  border: 1px solid #105be6;
}

ul.pagination li a:hover:not(.active) {
  background-color: #ddd;
}
```

# 2019-06-05

- 图片通过superman上传到CDN后再使用，多张图片使用空格分开，路径前加/

- https://www.jianshu.com/p/062ae467e41f thymeleaf模板导航栏高亮，

- https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#parameterizable-fragment-signatures 🔗 8 Template Layout

- https://www.w3xue.com/exp/article/20195/38371.html

# 2019-06-06

- zan-proxy转发规则在网页端设置，转发设置-启用转发-前往编辑
- Daily日常开发，QA测试，预发准备上线
- 写jq不用eslint检查顶部加，`/* eslint-disable */` 注释

# 2019-06-10

## TODO

- [x] 看文档要实现怎样的功能
- [x] 功能要调用什么接口
- [x] 对账平台前端不需要做
- [x] 固定维护要做
- [x] HttpPath给出
## 总结

- ES6解构赋值模式匹配赋值
- Jira就是线上问题

## 联调注意事项

- 联调查看接口问题到Network XHR 接口请求的Response/Preview中查看查看问题

- 在Header中滑到最底下看前端传的参数Request Payload

- 把zanproxy转发关闭之后访问就是访问的sc环境，接口可能在sc环境上没有问题，但是代理到本地出现问题

# 2019-06-10

## TODO

- [x] React看完
- [x] Ant Design看个大概

## 总结

```react
{getFieldValue('maintain') === '2' && (
  <a href="#">固定维护</a>
)}
// 等同于，但是在return中只能这么写
if (getFieldValue('maintain') === '2') {
  <a href="#">固定维护</a>
}
```

- 展开运算符`...`表示将一个数组转为用逗号分隔的参数序列
- 垫资平台不要在v2下git，在项目目录下git

# 2019-06-20

-  https://caniuse.com/ 兼容性查看

-  IE8不兼容header footer，兼容first-child/last-child

-  一般写img，不写background-img，兼容性更好，后台可以直接改

-  first-child是针对便签元素的，对类不生效，可在外面再套个div，然后那个div中的子元素first-child即可

```scss
 .cardlist :first-child {
    margin-right: 150px;
}
```

# 2019-06-21

- yarn或npm install安装下依赖
- VS Code打开最近 control + R

# 2019-06-25

- ESlint不能直接使用this.state，而要使用解构

```react
const item = this.state;
item.isShow;
// 等同于
this.state.isShow
```

- 用nvm进行node版本管理https://www.kancloud.cn/summer/nodejs-install/71975
- chrome一般在network中开启disable cache，只有在开启调试模式的时候显示

# 2019-06-26

- td: nth-child(3)，代表第几个td，写的是子元素:，不是父元素:
- 关闭easy sass 不要自动生成.min.css和.css
- commit时sass-lint未通过修改后需要重新ga .
- Spring后端可以设置不显示浏览器icon

# 2019-06-27

- 代码规范
- codereview：css命名规范，最外层文件夹命名-XXX，一定要唯一标识
- 接口i开头，i开头写两个i
- 开发页面扩展屏和小屏都要测试一下
- 上车前删除无用代码和console和注释
- 回归===验证一下，切预发多人看一下
- 分支名字取

# 2019-06-28

- 有问题先打开调试模式的console和network看看，两个都要看！
- 试用期结束分享：自我介绍、工作总结、未来展望

# 2019-07-02

- map和reduce https://www.liaoxuefeng.com/wiki/1022910821149312/1024322552460832

- Since Sass 3.3, we can write things like this:

  ```scss
  .block {
      /* CSS declarations for `.block` */
  
      &__element {
          /* CSS declarations for `.block__element` */
      }
  
      &--modifier {
          /* CSS declarations for `.block--modifier` */
  
          &__element {
              /* CSS declarations for `.block--modifier__element` */
          }
      }
  }
  ```

# 2019-07-03

- position: fixed只能基于浏览器定位
- % 是相对于父元素的大小设定的比率
- vw (viewport width) vh (viewport height) 是视窗的大小，100vw = 100%视窗宽度 100vh = 100%视窗高度，用vw，vh设定的大小只和视窗大小有关，所以用来开发多种屏幕设备的应用用这个单位还是挺合适的

css3中的width:100vh以及calc(100vh - 10px)

**vh/vw** 
`vh`: 相对于视窗的高度, 视窗被均分为100单位的vh; 
`vw`: 相对于视窗的宽度, 视窗被均分为100单位的vw;

`vmax`: 相对于视窗的宽度或高度中较大的那个。其中最大的那个被均分为100单位的vmax; 
`vmin`: 相对于视窗的宽度或高度中较小的那个。其中最小的那个被均分为100单位的vmin; 
`视区`所指为浏览器内部的可视区域大小， 
即`window.innerWidth/window.innerHeight`大小，不包含任务栏标题栏以及底部工具栏的浏览器区域大小。

**calc** 
calc是英文单词calculate(计算)的缩写，是css3的一个新增的功能，用来指定元素的长度。比如说，你可以使用calc()给元素的border、margin、pading、font-size和width等属性设置动态值。为何说是动态值呢?因为我们使用的表达式来得到的值。不过calc()最大的好处就是用在流体布局上，可以通过calc()计算得到元素的宽度。

calc是 css3提供的一个在css文件中计算值的函数：

- 用于动态计算长度值
- 需要注意的是，**运算符前后都需要保留一个空格**，例如：width: calc(100% - 10px)
- 任何长度值都可以使用calc()函数进行计算
- calc()函数支持 “+”, “-“, “*”, “/” 运算
- calc()函数使用标准的数学运算优先级规则

```css
calc(100vh - 10px)  表示整个浏览器窗口高度减去10px的大小
calc(100vw - 10px)   表示整个浏览器窗口宽度减去10px的大小12
```

> 一般用来设置流式布局宽高，当然，你可以使用calc()给元素的border、margin、pading、font-size和width等属性设置动态值



- 预发、daily都可代理到本地，只是node无效，html和css有效

如何找项目要改哪里
- 根据URL找页面js在哪里Component、pages
- 在那个目录根据页面特殊关键字来定位

# 2019-07-04

- v4/assets === pc-assets
- V4/ump === wsc-ump
- v2 === wsc
- 代理到本地失败，可以通过看network中的JS CSS等查看
- a标签的书写和BlockHeader的childAlign属性

```jsx
<BlockHeader title="广告投放金" childAlign="right">
  	<Link>对账单</Link>
</BlockHeader>
```

# 2019-07-08

- 一定要打包！！！，转发到本地ok，QA出错可能是没有打包
- 转发到本地一直空白可能是没有yarn start
- 遇到问题先看console，再看network

```react
 onChangeEnd = index => time => {
    const { group } = this.state;
    const startTime = group[index].timeRange[0];
		// 注意此处写法，相当于if a === true then return a.format
    const endTime = time && time.format('HHmmss');
    const timeRange = [startTime, endTime];

    const newGroup = group.map((item, groupIndex) => {
      if (index === groupIndex) {
        return { bank: '*-*', timeRange };
      }
      return item;
    });
```

- 看preview错误右下角有个prettier
- 打log加一下标注，console.log(`${err}: err`, values, '###');

```react
if (!err) {
  let isFilled = false;
	// 一下子全部解构出来
  const { maintain, allMaintainDetail, fixMaintainDetail } = values;

  if (maintain === '2') {
    const arr = [].concat(allMaintainDetail, fixMaintainDetail);
    console.log(arr);
    arr.forEach(item =>
                item.timeRange.some(time => {
      if (time) {
        isFilled = true;
      }
    })
               );
  }
```

- Eslint 箭头函数最后必须有一个return 可以写个return null

# 2019-07-09

className可写成styles数组的形式

```react
import styles from './style.less';

<Form className={styles['search-field']} layout="inline" onSubmit={this.handleSubmit}>
```

React filter from 用div换行

时间处理使用date_ fns库

```react
 dateRange: [startOfSecond(start).valueOf(), endOfSecond(end).valueOf()],
```

# 2019-07-10

- 开发没有ip创建应用让负责人去同步qa环境
- const { group = [] } = this.state;相当于解构不到给group设置默认值，防止之后undefined报错
- map如果undefined的会报错，所以get(item, 'timeRange[0]', '') lodash设置默认值来防止出现问题
- 无意义的数字少出现可以使用如下写法

```react
const TYPE = {
  no: '0',
  part: '1',
  all: '2',
};
```

# 2019-07-12

- map中定义一个item相当于复制出来了一个，然后item可以是对象也可以是一个值，最后处理之后return，作为map后新数组的第一项，接下来item再赋值原本的第二个，进行处理后return，作为map新数组的第二项，item是全新的，和原本的无瓜
- 有问题先查JS高级程序设计，ES6标准，再google

# 2019-07-16

- 支付运营平台如果sc空白，但是转发到本地OK说明忘记打包了
- this.XX.XX.XX很多的时候使用lodash的get，否则会爆炸

# 2019-07-17

团建

- 椒色
- 深海炖锅
- 小郡肝火锅串串香 √

如果接口是两个参数而不是接受一个对象，应该传递数组

下面的if或者啥的有问题，现在前面打条件中变量的log

没有加我的sc也可以在全部项目中搜索看到

# 2019-07-24

- 在code.qima发起codereview
- gitlab上，**Ready to be merged automatically**才发，否则conflict要自己解决，在自己的分支下git merge master，解决冲突后直接git push

# 2019-07-25

- 预发不用合master，而是切出一个merge分支来发布
- code review的时候如果要mr的话不要选择git flow，可以选择merge Request
- icon的font-size最小12px，如果还要小就设置transform: scale(0.X)

# 2019-07-26

- fabu平台发预发使用merge分支，master
- merge分支发之前看看线上有没有今天的merge分支

# 2019-07-30

- ``中可直接使用变量，使用${XX}
- 要渲染html标签可使用`content = (<span>123</span>)`，然后调用变量
-  yarn global add!!!! 打错了就会报莫名其妙的错误

# 2019-08-01

- zent 7升级，pageSize不能是数组了



# 项目的启动、git和发布

项目启动流程

1. yarn
2. make pre相当于在每个目录都yarn一下
3. yarn start 启动node服务
4. yarn www 启动编译静态页面
5. ZanProxy导入远程规则，远程转发规则[http://gitlab.qima-inc.com/fe/staticRedirectRules](http://gitlab.qima-inc.com/fe/staticRedirectRules)
6. ZanProxy转发变量配置

---

项目发布流程


1. 删除src
2. 设置git config —global中的user和email

------

5. yarn build/make pre打包
6. git diff === gd
7. git add . === ga .
8. git status 查看上传文件 === gst
9. git commit -m "add/fix/feat/xx: 中文内容" === gc -m
10. git push --set-upstream origin feature/front_dev

大项目线上打包：[http://fastbuild.qima-inc.com/webui/dashboard](http://fastbuild.qima-inc.com/webui/dashboard)，先git commit，然后添加任务选择对应的分支，不用本地打包

---

11. qa环境发布，选好sc进行验收测试

http://xiaolv.qima-inc.com/#/demand/search?show=true&ids=21744，这个需求我已经改好了麻烦验收一下，在qa环境下的这个sc：prj006639下

11. 联调需设置sc环境号，在ZanProxy中设置
12. 根据sc环境的ip更改转发规则中的ip，在zan-proxy中点击同步sc选择相应的即可
13. 在基础保障平台的持续交付中选择新建项目，一般选择敏捷，2天后会回收

![](%E5%B7%A5%E4%BD%9C%E7%AC%94%E8%AE%B0.assets/image-20190611114317683.png)

![](%E5%B7%A5%E4%BD%9C%E7%AC%94%E8%AE%B0.assets/image-20190610114846350.png)

13. 先git后发布，因为后端或别人那里没有我们的仓库代码，所以发布之后才能自动测试或者后端测试，本地其实不影响

![image-20190610115115929](%E5%B7%A5%E4%BD%9C%E7%AC%94%E8%AE%B0.assets/image-20190610115115929.png)

从git的master拉分支

```shell
git checkout -b dev
// ===
gc -b hotfix/ftx
```

切换到一个已有的分支 

```shell
git checkout xxx (branch name)
```

git一个分支merge到另一个分支

```shell
git checkout master 
git pull 
git checkout hotfix/ftx 
git pull
git checkout master
git merge hotfix/ftx
git push
```

git一个分支替换另一个分支

```shell
git reset —hard master
```

# superman

[http://npm.qima-inc.com/package/@youzan/superman](http://npm.qima-inc.com/package/@youzan/superman)

两种使用方式：
*. 在superman初始化的项目下
    *. 直接执行：```superman cdn``` 自动上传文件到cdn中。
    *. 上传的文件为cdn中每个键值对的key
    *. 上传的路径为cdn中每个键值对的value
    *. 上传的服务器为七牛和又拍，如果是图片文件，还会额外上传到内部的七牛服务
*. 上传指定文件指定文件
设置了上传路径：
superman cdn /path/to/cdn/dir ~/Desktop/*.jpg 上传所有jpg后缀的文件到七牛和又拍下的```/path/to/cdn/dir```
    *. 不设置上传路径
        *. ```superman cdn ~/Desktop/*.jpg``` 上传jpg后缀的文件到到七牛和又拍下的```public_files/2016/10/10/xxxxx1111111111.jpg```
*. 上传时指定 bucket ，会尝试上传到七牛和又拍，不指定时按默认上传到 kdt-static，为图片时额外上传到 kdt_img 和 kdt_img_test
    *. ```superman cdn -b kdt-static ~/Desktop/*.jpg```
    *. ```superman cdn --bucket kdt-static ~/Desktop/*.jpg```



superman cdn /pay-gaohuitong ~/Desktop/2.jpg

使用：https://img.yzcdn.cn/yun/img/pay-gaohuitong/13.png

# 高汇通官网

- 效率平台：[http://xiaolv.qima-inc.com/#/project/PROJ-4050/kanban](http://xiaolv.qima-inc.com/#/project/PROJ-4050/kanban)
- body字体：font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft Yahei', STHeiti,SimSun,sans-serif
- 发布平台：http://fabu.qima-inc.com/apps/

# pc-assets

- 线上连接，https://www.youzan.com/v4/assets/deposit
- 部分打包

```shell
yarn dev -e 'deposit' // 不用带page，要写''
```

# 支付运营平台

- 支付运营平台默认转发ip
- prd文档：https://doc.qima-inc.com/pages/viewpage.action?pageId=207228983
- 效率平台：http://xiaolv.qima-inc.com/#/project/PROJ-3877
- 开发文档：https://doc.qima-inc.com/pages/viewpage.action?pageId=57097311
- 接口文档：[http://zanapi.qima-inc.com/site/service/view/428043](http://zanapi.qima-inc.com/site/service/view/428043)
- 前端代码都在这两个目录下  本次的代码是在 v2 下，v2目录下执行 yarn start启动，打包的话 在 v2 目录下执行 yarn build，git的话不能在v2，得在上一级目录
- zanproxy转发规则：  [zpws-支付运营平台V2 (2).json](../../Desktop/youzan/支付运营平台/zpws-支付运营平台V2 (2).json) 
- 出金增加D0垫资渠道原型：[出金增加D0垫资渠道.sketch](../../Desktop/youzan/支付运营平台/出金增加D0垫资渠道.sketch) 
- v2线上连接：[http://pay-opcenter.qa.s.qima-inc.com/v2/page/channelInfo/merchantConfig](http://pay-opcenter.qa.s.qima-inc.com/v2/page/channelInfo/merchantConfig)
- ant-design文档：https://2x.ant.design/components/table-cn/
- [x] allMerchant
- [x] 接口是怎么和接口文档去对应的，问小鱼儿httppath
- [x] 文件目录的含义，merchant：商户配置，withdraw：出金渠道信息
- [x] 接口联调的步骤
- api.js -> index.js -> 相应组件
- 通过setState和生命周期函数did
- 发布平台：[http://ops.qima-inc.com/#/cd_project/5379](http://ops.qima-inc.com/#/cd_project/5379)
- 预发：http://pay-opcenter.pre.fin.qima-inc.com
- 线上：http://pay-opcenter.prod.fin.qima-inc.com
- daily：http://pay-opcenter.daily.s.qima-inc.com
## 发线上
- 在fabu发布
- 发之前在当前分支合并最新master
- 然后在v1 v2下分别打包
- 发起cr
- 发起merge request让小橘合并到master
- 申请工单
- 发布

# 认证

- 打包是fe/cert
- 验证是node_cert

# TODO

- [x] 写日报：https://youren.qima-inc.com/
- [x] jq如何引入
- [x] idea页面footer怎么撑到底部
- [x] 分页是否有现成的组件
- [x] nunjucks的使用
- [x] 鱼骨改成a
- [x] Sass学习
- [x] 项目+React学习
- [x] 布局文档整理