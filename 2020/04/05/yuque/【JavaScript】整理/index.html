<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    

    

    



    <meta charset="utf-8">
    <meta name="referrer" content="no-referrer">
    
    
    
    
    <title>【JavaScript】整理 | 冯天祥 | 前端小白的技术博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content>
    <meta name="description" content="title: 【JavaScript】整理date: 2019年04月08日 00:27:43categories: JavaScripttypora-root-url: ..typora-copy-images-to: ../images 一、变量类型和计算   JS 中使用 typeof 能得到的哪些类型 何时使用===何时使用== JS 中有哪些内置函数 JS 变量按照存储方式区分为哪些类">
<meta name="keywords" content="前端,技术,冯天祥,fengtx">
<meta property="og:type" content="article">
<meta property="og:title" content="【JavaScript】整理">
<meta property="og:url" content="http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/index.html">
<meta property="og:site_name" content="冯天祥">
<meta property="og:description" content="title: 【JavaScript】整理date: 2019年04月08日 00:27:43categories: JavaScripttypora-root-url: ..typora-copy-images-to: ../images 一、变量类型和计算   JS 中使用 typeof 能得到的哪些类型 何时使用===何时使用== JS 中有哪些内置函数 JS 变量按照存储方式区分为哪些类">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://fengtx.tk/images/undefined#alt=">
<meta property="og:image" content="http://fengtx.tk/images/201904040047550.png#alt=">
<meta property="og:image" content="http://fengtx.tk/images/201903251223050.png#alt=">
<meta property="og:image" content="http://fengtx.tk/images/20190404004851517.png#alt=">
<meta property="og:image" content="http://fengtx.tk/images/20190404004912484.png#alt=">
<meta property="og:image" content="http://fengtx.tk/images/20190316124944639.png#alt=">
<meta property="og:image" content="http://fengtx.tk/images/20190316141610797.png#alt=">
<meta property="og:image" content="http://fengtx.tk/images/2019031614163253.png#alt=">
<meta property="og:image" content="http://fengtx.tk/images/20190316141714170.png#alt=">
<meta property="og:image" content="http://fengtx.tk/images/20190316141727999.png#alt=">
<meta property="og:image" content="http://fengtx.tk/images/20190321231209609.png#alt=">
<meta property="og:image" content="http://fengtx.tk/images/2019032212273325.png#alt=">
<meta property="og:updated_time" content="2020-10-15T15:44:29.662Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【JavaScript】整理">
<meta name="twitter:description" content="title: 【JavaScript】整理date: 2019年04月08日 00:27:43categories: JavaScripttypora-root-url: ..typora-copy-images-to: ../images 一、变量类型和计算   JS 中使用 typeof 能得到的哪些类型 何时使用===何时使用== JS 中有哪些内置函数 JS 变量按照存储方式区分为哪些类">
<meta name="twitter:image" content="http://fengtx.tk/images/undefined#alt=">
    
        <link rel="alternate" type="application/atom+xml" title="冯天祥" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">冯天祥</h5>
          <a href="mailto:im.txfeng@gmail.com" title="im.txfeng@gmail.com" class="mail">im.txfeng@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/">
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories">
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives">
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/kxbk100" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">【JavaScript】整理</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">【JavaScript】整理</h1>
        <h5 class="subtitle">
            
                <time datetime="2020-04-05T00:55:26.000Z" itemprop="datePublished" class="page-time">
  2020-04-05
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#title-【JavaScript】整理date-2019年04月08日-00-27-43"><span class="post-toc-number">1.</span> <span class="post-toc-text">title: 【JavaScript】整理date: 2019年04月08日 00:27:43</span></a></li></ol><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一、变量类型和计算"><span class="post-toc-number"></span> <span class="post-toc-text">一、变量类型和计算</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#变量类型"><span class="post-toc-number">1.</span> <span class="post-toc-text">变量类型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#基本类型-值类型"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">基本类型/值类型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#对象-引用类型"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">对象/引用类型</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#typeof-运算符"><span class="post-toc-number">2.</span> <span class="post-toc-text">typeof 运算符</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#类型转换"><span class="post-toc-number">3.</span> <span class="post-toc-text">类型转换</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#转-Boolean"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">转 Boolean</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#引用类型转基本类型"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">引用类型转基本类型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#四则运算"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">四则运算</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#比较运算符"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">比较运算符</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#题目解答"><span class="post-toc-number">4.</span> <span class="post-toc-text">题目解答</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#二、原型与原型链"><span class="post-toc-number"></span> <span class="post-toc-text">二、原型与原型链</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#构造函数"><span class="post-toc-number">1.</span> <span class="post-toc-text">构造函数</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#new-一个构造函数，返回一个对象的过程"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">new 一个构造函数，返回一个对象的过程</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Tips"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">Tips</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#原型"><span class="post-toc-number">2.</span> <span class="post-toc-text">原型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-条原型规则和示例"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">5 条原型规则和示例</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#原型链"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">原型链</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#instanceof"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">instanceof</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#循环对象自身属性"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">循环对象自身属性</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#题目解答-1"><span class="post-toc-number">3.</span> <span class="post-toc-text">题目解答</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#三、闭包和作用域"><span class="post-toc-number"></span> <span class="post-toc-text">三、闭包和作用域</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#执行上下文（声明提升）"><span class="post-toc-number">1.</span> <span class="post-toc-text">执行上下文（声明提升）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#this"><span class="post-toc-number">2.</span> <span class="post-toc-text">this</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#作为构造函执行"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">作为构造函执行</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#作为对象属性执行"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">作为对象属性执行</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#作为普通函数执行"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">作为普通函数执行</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#call-apply-bind"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">call apply bind</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#作用域"><span class="post-toc-number">3.</span> <span class="post-toc-text">作用域</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#目的"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">目的</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#作用域链"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">作用域链</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#闭包使用场景"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">闭包使用场景</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#题目解答-2"><span class="post-toc-number">4.</span> <span class="post-toc-text">题目解答</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#四、异步和单线程"><span class="post-toc-number"></span> <span class="post-toc-text">四、异步和单线程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#什么是异步（对比同步）"><span class="post-toc-number">1.</span> <span class="post-toc-text">什么是异步（对比同步）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前端使用异步的场景"><span class="post-toc-number">2.</span> <span class="post-toc-text">前端使用异步的场景</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#异步和单线程的实现原理"><span class="post-toc-number">3.</span> <span class="post-toc-text">异步和单线程的实现原理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#执行顺序-demo"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">执行顺序 demo</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#执行顺序原理"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">执行顺序原理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是单线程"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">什么是单线程</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#题目解答-3"><span class="post-toc-number">4.</span> <span class="post-toc-text">题目解答</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#五、其它（如日期、Math、各种常用-API）"><span class="post-toc-number"></span> <span class="post-toc-text">五、其它（如日期、Math、各种常用 API）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#日期"><span class="post-toc-number">1.</span> <span class="post-toc-text">日期</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Math"><span class="post-toc-number">2.</span> <span class="post-toc-text">Math</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数组-API"><span class="post-toc-number">3.</span> <span class="post-toc-text">数组 API</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#forEach：遍历数组中所有元素"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">forEach：遍历数组中所有元素</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#every：判断所有元素是否都符合条件"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">every：判断所有元素是否都符合条件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#some：判断是否有至少一个元素符合条件"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">some：判断是否有至少一个元素符合条件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#sort：排序"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">sort：排序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#map：对元素重新组装"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">map：对元素重新组装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#fileter：过滤符合条件的元素"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">fileter：过滤符合条件的元素</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#对象-API"><span class="post-toc-number">4.</span> <span class="post-toc-text">对象 API</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#for-in：遍历对象中所有属性"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">for in：遍历对象中所有属性</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#题目解答-4"><span class="post-toc-number">5.</span> <span class="post-toc-text">题目解答</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#六、JS-Web-API-DOM-amp-BOM"><span class="post-toc-number"></span> <span class="post-toc-text">六、JS-Web-API DOM&amp;BOM</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#回顾-JS-基础知识"><span class="post-toc-number">1.</span> <span class="post-toc-text">回顾 JS 基础知识</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DOM-本质"><span class="post-toc-number">2.</span> <span class="post-toc-text">DOM 本质</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DOM-节点操作"><span class="post-toc-number">3.</span> <span class="post-toc-text">DOM 节点操作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#获取-DOM-节点"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">获取 DOM 节点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#property"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">property</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Attribute"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">Attribute</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DOM-结构操作"><span class="post-toc-number">4.</span> <span class="post-toc-text">DOM 结构操作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#获取父元素"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">获取父元素</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#获取子元素"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">获取子元素</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#新增节点"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">新增节点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#删除节点"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">删除节点</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#BOM"><span class="post-toc-number">5.</span> <span class="post-toc-text">BOM</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#navigator"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">navigator</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#screen"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">screen</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#location"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">location</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#history"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">history</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#题目解答-5"><span class="post-toc-number">6.</span> <span class="post-toc-text">题目解答</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#七、事件"><span class="post-toc-number"></span> <span class="post-toc-text">七、事件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#通用事件绑定"><span class="post-toc-number">1.</span> <span class="post-toc-text">通用事件绑定</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#事件冒泡"><span class="post-toc-number">2.</span> <span class="post-toc-text">事件冒泡</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#代理"><span class="post-toc-number">3.</span> <span class="post-toc-text">代理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#题目解答-6"><span class="post-toc-number">4.</span> <span class="post-toc-text">题目解答</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#八、Ajax-amp-跨域"><span class="post-toc-number"></span> <span class="post-toc-text">八、Ajax &amp; 跨域</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#XMLHttpRequest"><span class="post-toc-number">1.</span> <span class="post-toc-text">XMLHttpRequest</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#状态码说明"><span class="post-toc-number">2.</span> <span class="post-toc-text">状态码说明</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#跨域"><span class="post-toc-number">3.</span> <span class="post-toc-text">跨域</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#什么是跨域"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">什么是跨域</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSONP"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">JSONP</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#实现原理"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">实现原理</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#服务器端设置-http-header"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">服务器端设置 http header</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#题目解答-7"><span class="post-toc-number">4.</span> <span class="post-toc-text">题目解答</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#九、存储"><span class="post-toc-number"></span> <span class="post-toc-text">九、存储</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#cookie"><span class="post-toc-number">1.</span> <span class="post-toc-text">cookie</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#localStorage"><span class="post-toc-number">2.</span> <span class="post-toc-text">localStorage</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#sessionStorage"><span class="post-toc-number">3.</span> <span class="post-toc-text">sessionStorage</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#题目解答-8"><span class="post-toc-number">4.</span> <span class="post-toc-text">题目解答</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#十、开发环境"><span class="post-toc-number"></span> <span class="post-toc-text">十、开发环境</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#关于开发环境"><span class="post-toc-number">1.</span> <span class="post-toc-text">关于开发环境</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#IDE"><span class="post-toc-number">2.</span> <span class="post-toc-text">IDE</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Git"><span class="post-toc-number">3.</span> <span class="post-toc-text">Git</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#模块化"><span class="post-toc-number">4.</span> <span class="post-toc-text">模块化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#不使用模块化"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">不使用模块化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用模块化"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">使用模块化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#AMD"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">AMD</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#CommonJS"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">CommonJS</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#AMD-和-CommonJS-的使用场景"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">AMD 和 CommonJS 的使用场景</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#构建工具-对模块化的代码打包和压缩"><span class="post-toc-number">5.</span> <span class="post-toc-text">构建工具(对模块化的代码打包和压缩)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装-nodeJS"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">安装 nodeJS</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装-webpack"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">安装 webpack</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置-webpack"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">配置 webpack</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用-jQuery"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">使用 jQuery</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#压缩-jQuery"><span class="post-toc-number">5.5.</span> <span class="post-toc-text">压缩 jQuery</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#上限回滚流程"><span class="post-toc-number">6.</span> <span class="post-toc-text">上限回滚流程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#介绍"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">介绍</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#上线和回滚的基本流程"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">上线和回滚的基本流程</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#linux-基本命令"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">linux 基本命令</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#十一、运行环境"><span class="post-toc-number"></span> <span class="post-toc-text">十一、运行环境</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#页面加载过程"><span class="post-toc-number">1.</span> <span class="post-toc-text">页面加载过程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#加载资源的形式"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">加载资源的形式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#加载一个资源的过程"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">加载一个资源的过程</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#浏览器渲染页面的过程"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">浏览器渲染页面的过程</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#性能优化"><span class="post-toc-number">2.</span> <span class="post-toc-text">性能优化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#原则"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">原则</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#从哪里入手"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">从哪里入手</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#加载页面和静态资源"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">加载页面和静态资源</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#页面渲染"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">页面渲染</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安全性"><span class="post-toc-number">3.</span> <span class="post-toc-text">安全性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#XSS-跨站请求攻击"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">XSS 跨站请求攻击</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#CSRF-跨站请求伪造"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">CSRF 跨站请求伪造</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#面试技巧"><span class="post-toc-number">4.</span> <span class="post-toc-text">面试技巧</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#简历"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">简历</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#过程中"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">过程中</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#题目解答-9"><span class="post-toc-number">5.</span> <span class="post-toc-text">题目解答</span></a></li></ol>
        </li></nav>
    </aside>


<article id="post-yuque/【JavaScript】整理" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">【JavaScript】整理</h1>
        <div class="post-meta">
            <time class="post-time" title="2020-04-05 08:55:26" datetime="2020-04-05T00:55:26.000Z" itemprop="datePublished">2020-04-05</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none">
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <hr>
<h2 id="title-【JavaScript】整理date-2019年04月08日-00-27-43"><a href="#title-【JavaScript】整理date-2019年04月08日-00-27-43" class="headerlink" title="title: 【JavaScript】整理date: 2019年04月08日 00:27:43"></a>title: 【JavaScript】整理date: 2019年04月08日 00:27:43</h2><p>categories: JavaScript<br>typora-root-url: ..<br>typora-copy-images-to: ../images</p>
<h1 id="一、变量类型和计算"><a href="#一、变量类型和计算" class="headerlink" title="一、变量类型和计算"></a>一、变量类型和计算</h1><hr>
<blockquote>
<ol>
<li>JS 中使用 typeof 能得到的哪些类型</li>
<li>何时使用<code>===</code>何时使用<code>==</code></li>
<li>JS 中有哪些内置函数</li>
<li>JS 变量按照存储方式区分为哪些类型，并描述其特点</li>
<li>如何理解 JSON</li>
</ol>
</blockquote>
<h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><p>JS 中有 7 种<strong>内置类型</strong>，7 种内置类型又分为两大类型</p>
<ul>
<li>基本类型/值类型：<code>null</code>、<code>undefined</code>、<code>boolean</code>、<code>number</code>、<code>string</code>、<code>symbol</code></li>
<li>对象/引用类型：<code>object</code></li>
</ul>
<h3 id="基本类型-值类型"><a href="#基本类型-值类型" class="headerlink" title="基本类型/值类型"></a>基本类型/值类型</h3><p><strong>是什么</strong></p>
<p>把每一个值存放在对应变量内存的位置，数据分块存放在内存中，数据之间不会相互影响</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">a = <span class="number">200</span>;</span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<p><strong>条件</strong></p>
<p>原始类型存储的都是值，是没有函数可以调用的，比如<code>undefined.toString()</code></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/undefined#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p><code>&#39;1&#39;.toString()</code> 是可以使用的。在这种情况下，<code>&#39;1&#39;</code> 已经不是原始类型了，而是被强制转换成了 <code>String</code> 类型（大写）也就是引用类型，所以可以调用 <code>toString</code> 函数</p>
<p>JS 的<code>number</code> 类型是浮点类型的，在使用中会遇到某些 Bug</p>
<ul>
<li><code>NaN</code>也属于<code>number</code>类型，并且<code>NaN</code>不等于自身</li>
<li><code>0.1 + 0.2 !== 0.3</code></li>
</ul>
<p><code>string</code>类型是不可变的，无论你在<code>string</code>类型上调用何种方法，都不会对值有改变</p>
<p>对于<code>null</code>来说，很多人会认为他是个引用类型，其实这是错误的。虽然 <code>typeof null</code> 会输出 <code>object</code>，但是这只是 JS 存在的一个悠久 Bug。在 JS 的最初版本中使用的是 <strong>32 位系统</strong>，为了性能考虑使用<strong>低位存储</strong>变量的类型信息，<code>000</code> 开头代表是对象，然而 <code>null</code> 表示为全零，所以将它错误的判断为 <code>object</code> 。虽然现在的内部类型判断代码已经改变了，但是对于这个 Bug 却是一直流传下来</p>
<h3 id="对象-引用类型"><a href="#对象-引用类型" class="headerlink" title="对象/引用类型"></a>对象/引用类型</h3><p><strong>是什么</strong></p>
<p>当你创建了一个引用类型 a 的时候，计算机会在内存中帮我们开辟一个空间来存放值，但是我们需要找到这个空间，这个空间会拥有一个地址（指针），引用类型 a 存储的就是这个地址</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [];</span><br></pre></td></tr></table></figure>
<p>对于常量 <code>a</code> 来说，假设内存地址（指针）为 <code>#001</code>，那么在地址 <code>#001</code> 的位置存放了值 <code>[]</code>，常量 <code>a</code> 存放了地址（指针） <code>#001</code></p>
<p>当我们将变量赋值给另外一个变量时，复制的是原本变量的地址（指针），也就是说当前变量 <code>b</code> 存放的地址（指针）也是 <code>#001</code>，当我们进行数据修改的时候，就会修改存放在地址（指针） <code>#001</code> 上的值，也就导致了两个变量的值都发生了改变</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = [];</span><br><span class="line"><span class="keyword">const</span> b = a;</span><br><span class="line">b.push(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p><strong>产生原因</strong></p>
<p>若 a 赋值成一个对象，特别大，a 再赋值给 b，b 也会占很大的空间，不合理，所以引用类型是为了让内存共用空间，好几个变量共用 1 个内存块，节省内存空间，赋值只是变量指针的赋值，并不是每次赋值都把对象真正的值复制一份，所以值的修改相互干预</p>
<p><strong>分类边界</strong></p>
<p>数组<code>array</code>、函数<code>function</code>、对象<code>object</code></p>
<p><strong>目的</strong></p>
<p>无限制扩展属性，比如说对象有个 age 属性，可以加第 2 个属性 name 属性</p>
<p><strong>组合</strong></p>
<p>深浅拷贝</p>
<p><strong>条件</strong></p>
<p>函数参数是对象的情况</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">person</span>) </span>&#123;</span><br><span class="line">  person.age = <span class="number">26</span>;</span><br><span class="line">  person = &#123;</span><br><span class="line">    name: <span class="string">"yyy"</span>,</span><br><span class="line">    age: <span class="number">30</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = &#123;</span><br><span class="line">  name: <span class="string">"yck"</span>,</span><br><span class="line">  age: <span class="number">25</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = test(p1);</span><br><span class="line"><span class="built_in">console</span>.log(p1); <span class="comment">// -&gt; ?</span></span><br><span class="line"><span class="built_in">console</span>.log(p2); <span class="comment">// -&gt; ?</span></span><br></pre></td></tr></table></figure>
<ul>
<li>首先，函数传参是传递对象指针的副本</li>
<li>到函数内部修改参数的属性这步，我相信大家都知道，当前 <code>p1</code> 的值也被修改了</li>
<li>但是当我们重新为 <code>person</code> 分配了一个对象时就出现了分歧，请看下图</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/201904040047550.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p>所以最后 <code>person</code> 拥有了一个新的地址（指针），也就和 <code>p1</code> 没有任何关系了，导致了最终两个变量的值是不相同的</p>
<h2 id="typeof-运算符"><a href="#typeof-运算符" class="headerlink" title="typeof 运算符"></a>typeof 运算符</h2><p><strong>是什么</strong></p>
<p>只能区分基本类型的详细类型，引用类型无法细分</p>
<p><strong>分类边界</strong></p>
<p><code>typeof</code>对于基本类型来说，除了<code>null</code>都可以显示正确的类型</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">// 'object' BUG</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>; <span class="comment">// 'undefined'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>; <span class="comment">// 'boolean'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">1</span>; <span class="comment">// 'number'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">"1"</span>; <span class="comment">// 'string'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>(); <span class="comment">// 'symbol'</span></span><br></pre></td></tr></table></figure>
<p><code>typeof</code>对于引用类型来说，除了函数都会显示<code>object</code>，所以说<code>typeof</code>并不能准确判断引用变量到底是什么类型。因为函数是一个十分特殊的引用类型，在 JS 中函数的地位非常高，所以需要在任何地方轻松判断出这个是函数，所以 typeof 单独把函数列出来</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> []; <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125;; <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">console</span>.log; <span class="comment">// 'function'</span></span><br></pre></td></tr></table></figure>
<p><strong>组合</strong></p>
<p>instanceof</p>
<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><p><strong>是什么</strong></p>
<p>在 JS 中类型转换只有三种情况</p>
<ul>
<li>转换为布尔值</li>
<li>转换为数字</li>
<li>转换为字符串</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/201903251223050.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<p><strong>组合</strong></p>
<h3 id="转-Boolean"><a href="#转-Boolean" class="headerlink" title="转 Boolean"></a>转 Boolean</h3><p>在条件判断时，除了<code>undefined</code>、<code>null</code>、<code>false</code>、<code>NaN</code>、<code>&#39;&#39;</code>、<code>0</code>、<code>-0</code>，其他所有值都转为<code>true</code>，包括所有对象</p>
<h3 id="引用类型转基本类型"><a href="#引用类型转基本类型" class="headerlink" title="引用类型转基本类型"></a>引用类型转基本类型</h3><p>引用类型在转换类型的时候，会调用内置的 <code>[[ToPrimitive]]</code> 函数，对于该函数来说，算法逻辑一般来说如下</p>
<ul>
<li>如果已经是基本类型了，那就不需要转换了</li>
<li>调用 <code>x.valueOf()</code>，如果转换为基础类型，就返回转换的值</li>
<li>调用 <code>x.toString()</code>，如果转换为基础类型，就返回转换的值</li>
<li>如果都没有返回基本类型，就会报错</li>
</ul>
<p>当然你也可以重写 <code>Symbol.toPrimitive</code> ，该方法在转原始类型时调用优先级最高</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  valueOf() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"1"</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  [<span class="built_in">Symbol</span>.toPrimitive]() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="number">1</span> + a; <span class="comment">// =&gt; 3</span></span><br></pre></td></tr></table></figure>
<h3 id="四则运算"><a href="#四则运算" class="headerlink" title="四则运算"></a>四则运算</h3><p><strong>目的</strong></p>
<ul>
<li>字符串拼接</li>
<li>运算</li>
</ul>
<p><strong>组合</strong></p>
<ul>
<li>加法运算中一方为<strong>字符串</strong>，那么就会把另一方也转换为<strong>字符串</strong></li>
<li>加法运算中一方<strong>不是数字或字符串</strong>，那么会将它转换为<strong>数字或字符串</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="string">"1"</span>; <span class="comment">// '11'</span></span><br><span class="line"><span class="literal">true</span> + <span class="literal">true</span>; <span class="comment">// 2</span></span><br><span class="line"><span class="number">4</span> + [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// "41,2,3"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>对于第一行代码来说，触发特点一，所以将数字 <code>1</code> 转换为字符串，得到结果 <code>&#39;11&#39;</code></li>
<li>对于第二行代码来说，触发特点二，所以将 <code>true</code> 转为数字 <code>1</code></li>
<li>对于第三行代码来说，触发特点二，所以将数组通过 <code>toString</code> 转为字符串 <code>1,2,3</code>，得到结果 <code>41,2,3</code></li>
</ul>
<p><strong>条件</strong></p>
<p>对于加法还需要注意这个表达式 <code>&#39;a&#39; + + &#39;b&#39;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"a"</span> + +<span class="string">"b"</span>; <span class="comment">// -&gt; "aNaN"</span></span><br></pre></td></tr></table></figure>
<p>因为 <code>+ &#39;b&#39;</code> 等于 <code>NaN</code>，所以结果为 <code>&quot;aNaN&quot;</code></p>
<p><strong>Tips</strong></p>
<ul>
<li>用 <code>+ &#39;1&#39;</code> 的形式来快速获取 <code>number</code> 类型</li>
<li>用<code>!!</code>判断变量会被当做<code>true</code>还是<code>false</code></li>
</ul>
<p>那么对于除了加法的运算符来说，只要其中一方是数字，那么另一方就会被转为数字</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span> * <span class="string">"3"</span>; <span class="comment">// 12</span></span><br><span class="line"><span class="number">4</span> * []; <span class="comment">// 0</span></span><br><span class="line"><span class="number">4</span> * [<span class="number">1</span>, <span class="number">2</span>]; <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><p><strong>是什么</strong></p>
<p><code>== &gt; &lt; !=</code></p>
<p><strong>组合</strong></p>
<p>如果是对象，就通过 <code>toPrimitive</code> 转换对象</p>
<p>如果是字符串，就通过 <code>unicode</code> 字符索引来比较</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  valueOf() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"1"</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">a &gt; <span class="number">-1</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>在以上代码中，因为 <code>a</code> 是对象，所以会通过 <code>valueOf</code> 转换为原始类型再比较值</p>
<h2 id="题目解答"><a href="#题目解答" class="headerlink" title="题目解答"></a>题目解答</h2><blockquote>
<ol>
<li>JS 中使用 typeof 能得到的哪些类型</li>
</ol>
</blockquote>
<p>typeof 可以识别 6 种数据类型：number、string、boolean、object、function、undefined</p>
<blockquote>
<ol start="2">
<li>何时使用<code>===</code>何时使用<code>==</code></li>
</ol>
</blockquote>
<p><strong>使用 jQuery 源码中推荐的写法</strong>，当 obj.a 为 null 或 undefined 时，看一个对象的属性是否存在或看一个函数的参数是否存在，但对象和形参必须定义，否则会报错，可简写使用<code>==</code>，除此外一律用<code>===</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 看一个对象的属性是否存在</span></span><br><span class="line"><span class="keyword">if</span>(obj.a == <span class="literal">null</span>) &#123;</span><br><span class="line">  <span class="comment">// 相当于obj.a === null || obj.a ===undefined，简写形式</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 看一个函数的参数是否存在</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(a == <span class="literal">null</span>) &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="3">
<li>JS 中有哪些内置函数（数据封装类对象）</li>
</ol>
</blockquote>
<p>都是函数</p>
<ul>
<li>Boolean</li>
<li>Number</li>
<li>String</li>
<li><strong>Object</strong></li>
<li><strong>Array</strong></li>
<li><strong>Function</strong></li>
<li>Date</li>
<li>RegExp</li>
<li>Error（一定要大写）</li>
</ul>
<p>内置对象</p>
<ul>
<li>Math</li>
<li>JSON</li>
</ul>
<blockquote>
<ol start="4">
<li>JS 变量按照存储方式区分为哪些类型，并描述其特点</li>
</ol>
</blockquote>
<p>基本类型：数据分块存放在内存中，数据不会相互干涉</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">a = <span class="number">200</span>;</span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">//100</span></span><br></pre></td></tr></table></figure>
<p>引用类型：好几个变量共用 1 个内存块，节省内存空间，赋值只是变量指针的赋值，并不是真正值的拷贝，所以值的修改相互干预</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123; <span class="attr">age</span>: <span class="number">20</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> b = a;</span><br><span class="line">b.age = <span class="number">21</span>;</span><br><span class="line">conlose.log(a.age); <span class="comment">//21</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="5">
<li>如何理解 JSON</li>
</ol>
</blockquote>
<ul>
<li>JSON 只不过是一个 JS 对象而已</li>
<li>JSON 也是一种数据格式</li>
<li>Math 也是 JS 对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">a</span>: <span class="number">10</span>, <span class="attr">b</span>: <span class="number">20</span> &#125;); <span class="comment">//将对象转换为字符串</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'&#123;"a": 10,"b":20&#125;'</span>); <span class="comment">//将字符串变为对象</span></span><br></pre></td></tr></table></figure>
<h1 id="二、原型与原型链"><a href="#二、原型与原型链" class="headerlink" title="二、原型与原型链"></a>二、原型与原型链</h1><hr>
<blockquote>
<ol>
<li>如何准确判断一个变量是数组类型</li>
<li>写一个原型链继承的例子</li>
<li>描述 new 一个对象的过程</li>
<li>zepto（或其他框架）源码中如何使用原型链</li>
</ol>
</blockquote>
<h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><ul>
<li>构造函数首字母大写</li>
<li>构造函数类似于模板</li>
</ul>
<h3 id="new-一个构造函数，返回一个对象的过程"><a href="#new-一个构造函数，返回一个对象的过程" class="headerlink" title="new 一个构造函数，返回一个对象的过程"></a>new 一个构造函数，返回一个对象的过程</h3><ol>
<li>new 的时候把参数传入也可不传</li>
<li>new 函数执行时，创建一个空对象</li>
<li>this 指向这个新对象<code>this = {}</code></li>
<li>执行代码，即对 this.name 等开始顺序赋值</li>
<li>赋值完后，默认 return this</li>
<li>赋值给<code>f</code>，<code>f.name</code>、<code>f.age</code>、<code>f.class</code>生效</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.class = <span class="string">"class-1"</span>;</span><br><span class="line">  <span class="comment">// return this    //默认有这一行</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> Foo(<span class="string">"zhangsan"</span>, <span class="number">20</span>);</span><br><span class="line"><span class="comment">// var f1 = new Foo('lisi', 23); 可创建多个对象</span></span><br></pre></td></tr></table></figure>
<h3 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><ul>
<li><code>var obj = {}</code>其实是<code>var obj = new Object()</code>的语法糖</li>
<li><code>var arr = []</code>其实是<code>var arr = new Array()</code>的语法糖</li>
<li><code>var fn = funtion () {...}</code>其实是<code>var fn = new Function()</code>的语法糖</li>
<li>所有的引用类型（对象、数组、函数）都有构造函数</li>
<li>推荐使用前者的写法</li>
</ul>
<h2 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h2><h3 id="5-条原型规则和示例"><a href="#5-条原型规则和示例" class="headerlink" title="5 条原型规则和示例"></a>5 条原型规则和示例</h3><ol>
<li><strong>所有</strong>的引用类型（数组、对象、函数），都具有<strong>对象</strong>特性，即可自由扩展属性（<code>null</code>除外）</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">obj.a = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line">arr.a = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">fn.a = <span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>所有的引用类型</strong>，都有一个<code>__proto__</code>属性（隐式原型属性），属性值是一个普通的<strong>对象</strong></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(obj.__proto__);</span><br><span class="line"><span class="built_in">console</span>.log(arr.__proto__);</span><br><span class="line"><span class="built_in">console</span>.log(fn.__proto__);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><strong>所有函数</strong>，都有一个<code>prototype</code>属性（显式原型属性），属性值是一个普通的<strong>对象</strong></li>
</ol>
<ul>
<li>Number、String、Boolean、<strong>Object</strong>、<strong>Array</strong>、<strong>Function</strong>、Date、RegExp、Error（一定要大写）都是函数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(fn.prototype);</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><strong>所有引用类型</strong>，<code>__proto__</code>属性值指向（完全等===）他的构造函数的<code>prototype</code>属性值</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(obj.__proto__ === <span class="built_in">Object</span>.prototype);</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>当试图得到一个对象的某个属性时，若果这个对象本身没有这个属性，那么在它的<code>__proto__</code>（即它的构造函数的<code>prototype</code>）中寻找</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Foo.prototype.alertName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> Foo(<span class="string">"zhangsan"</span>);</span><br><span class="line">f.printName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line">f.printName();</span><br><span class="line">f.alertName();</span><br></pre></td></tr></table></figure>
<ul>
<li>f 本身没有<code>alertName</code>的属性，所以会去 f 的隐式原型<code>__proto__</code>中去寻找，f 的隐式原型<code>__proto__</code>即为其构造函数 Foo 的显式原型<code>prototype</code>，Foo 的显式原型已被扩展了<code>alertName</code>的属性，所以可顺利执行</li>
<li>this 永远指向对象本身，在执行<code>f.alertName()</code>的时候会执行到第 6 行<code>alert(this.name)</code>，但是这里的 this 还是 f 本身</li>
</ul>
<h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><ul>
<li><code>f.toString()</code>  -&gt;  <code>f.__proto__</code>  -&gt;  <code>Foo.prototype</code> -&gt; 无<code>toString</code>属性 -&gt; <code>Foo.prototype</code>是一个对象 -&gt; <code>Foo.prototype.__proto__</code>-&gt; <code>Object.prototype</code> -&gt; <code>f.__proto__.__proto__</code></li>
<li><code>Object.prototype.__proto__ = null</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">Foo.prototype.alertName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> Foo(<span class="string">"zhangsan"</span>);</span><br><span class="line">f.printName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line">f.printName();</span><br><span class="line">f.alertName();</span><br><span class="line">f.toString(); <span class="comment">// 要去f.__proto__.__proto__中查找</span></span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/20190404004851517.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/20190404004912484.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<h3 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h3><ul>
<li>判断<strong>引用类型</strong>属于哪个<strong>构造函数</strong>的方法</li>
<li><code>f instanceof Foo</code>判断逻辑：<code>f</code>的<code>__proto__</code>一层一层往上，能否对应到<code>Foo.prototype</code></li>
<li><code>f instanceof Object</code>判断逻辑：<code>f</code>的<code>__proto__</code>一层一层往上，是否对应到<code>Object.prototype</code></li>
</ul>
<h3 id="循环对象自身属性"><a href="#循环对象自身属性" class="headerlink" title="循环对象自身属性"></a>循环对象自身属性</h3><ul>
<li>从上述代码中可得 f 拥有三个属性：name、printName、alertName</li>
<li>但我们往往希望拿到对象本身定义的属性，而不要来自其原型的属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> item;</span><br><span class="line"><span class="keyword">for</span> (item <span class="keyword">in</span> f) &#123;</span><br><span class="line">  <span class="comment">// 高级浏览器已经在for in中屏蔽了来自原型的属性</span></span><br><span class="line">  <span class="comment">// 但这里建议大家加上这个判断，保证程序的健壮性以满足浏览器的兼容性</span></span><br><span class="line">  <span class="keyword">if</span> (f.hasOwnProperty(item)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="题目解答-1"><a href="#题目解答-1" class="headerlink" title="题目解答"></a>题目解答</h2><blockquote>
<ol>
<li>如何准确判断一个变量是数组类型</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line">arr <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">//true</span></span><br><span class="line"><span class="keyword">typeof</span> arr; <span class="comment">//object，typeof是无法判断数组的</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="2">
<li>写一个原型链继承的例子</li>
</ol>
</blockquote>
<ul>
<li>面试千万不要这么写</li>
<li>面试写更贴近实战的例子</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动物</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.eat = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"animal eat"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 狗</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.bark = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"dog bark"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">Dog.prototype = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="comment">// 哈士奇</span></span><br><span class="line"><span class="keyword">var</span> hashiqi = <span class="keyword">new</span> Dog();</span><br><span class="line">hashiqi.eat();</span><br><span class="line">hashiqi.bark();</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一个封装DOM查询的例子</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Elem</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.elem = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Elem.prototype.html = <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> elem = <span class="keyword">this</span>.elem;</span><br><span class="line">  <span class="keyword">if</span> (val) &#123;</span><br><span class="line">    elem.innerHTML = val;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>; <span class="comment">// 链式操作</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> elem.innerHTML;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Elem.prototype.on = <span class="function"><span class="keyword">function</span> (<span class="params">type, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> elem = <span class="keyword">this</span>.elem;</span><br><span class="line">  elem.addEventListener(type, fn);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>; <span class="comment">// 链式操作</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> div1 = <span class="keyword">new</span> Elem(<span class="string">"div1"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(div1.html());</span><br><span class="line">div1</span><br><span class="line">  .html(<span class="string">"&lt;p&gt;hello world&lt;/p&gt;"</span>)</span><br><span class="line">  .on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"clicked"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .html(<span class="string">"&lt;p&gt;javascript&lt;/p&gt;"</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="3">
<li>描述 new 一个对象的过程</li>
</ol>
</blockquote>
<ul>
<li>创建一个空对象</li>
<li>this 指向这个新对象</li>
<li>执行代码即对 this 赋值</li>
<li>返回 this</li>
</ul>
<blockquote>
<ol start="4">
<li>zepto（或其他框架）源码中如何使用原型链</li>
</ol>
</blockquote>
<ul>
<li>阅读源码是最高效提高技能的方式</li>
<li>但不能“埋头苦钻”，有技巧在其中，搜索别人的阅读体会</li>
<li>慕课网搜索“zepto 设计和源码分析”</li>
<li><strong>在面试时说出读过源码并分享心得体会十分加分</strong></li>
<li>jQuery 也可</li>
<li>Vue、React 不建议现在读</li>
</ul>
<h1 id="三、闭包和作用域"><a href="#三、闭包和作用域" class="headerlink" title="三、闭包和作用域"></a>三、闭包和作用域</h1><hr>
<blockquote>
<ol>
<li>说一下变量提升的理解</li>
<li>说明 this 几种不同的使用场景</li>
<li>创建 10 个<code>&lt;a&gt;</code>标签，点击的时候弹出来对应的序号</li>
<li>如何理解作用域</li>
<li>实际开发中闭包的应用</li>
</ol>
</blockquote>
<h2 id="执行上下文（声明提升）"><a href="#执行上下文（声明提升）" class="headerlink" title="执行上下文（声明提升）"></a>执行上下文（声明提升）</h2><p>范围：一段<code>&lt;script&gt;</code>或者一个函数</p>
<ul>
<li>全局（某个<code>&lt;script&gt;</code>）：变量定义提前、函数声明提前</li>
<li>函数（函数即将执行之前）：变量定义提前、函数声明提前、确定 this 的值、确定 arguments 的值</li>
</ul>
<p>注意：函数声明和函数表达式的区别</p>
<p>函数声明</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fn(); <span class="comment">// 不会报错，因为函数声明会提升</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  ... <span class="comment">// 函数声明</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>函数表示式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fn1(); <span class="comment">// 会报错，fn1会被当做变量定义，会提升相当于var fn1 = undefined，在执行fn1();</span></span><br><span class="line"><span class="comment">// 以下均为函数表达式，函数表达式本质上即为变量定义</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> fn1 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>假如下列代码在一个<code>&lt;script&gt;</code>中，在一个<code>&lt;script&gt;</code>中要定义一个全局的执行上下文，在执行第 1 行代码之前，会把所有的变量声明和函数声明都执行一遍，执行顺序如下：</p>
<ul>
<li>第 2 行，变量定义 ，还未执行到此，所以不会赋值，把 a 先拿出来，用 undefined 代替来占位</li>
<li>第 4-8 行，函数声明，把整个函数拿出来，以此函数生效可以执行</li>
<li>第 1 行，undefined</li>
<li>第 2 行，a 被赋值成 100</li>
<li>第 3 行，进入函数体，函数顺利执行</li>
<li>第 7 行，变量定义，并用 undefined 代替来占位</li>
<li>第 5 行，age 被赋值成 20</li>
<li>第 6 行，打印 arguments 参数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line">fn(<span class="string">'zhangsan'</span>); <span class="comment">// 'zhangsan', 20</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  age = <span class="number">20</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(name, age);</span><br><span class="line">  <span class="keyword">var</span> age；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局</span></span><br><span class="line"><span class="comment">// var a = undefined;</span></span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">fn(<span class="string">"zhangsan"</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 函数</span></span><br><span class="line">  <span class="comment">// 函数代码执行之前（不是函数声明之前），就已经确定了this的值</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  <span class="comment">// 函数代码执行之前（不是函数声明之前），就已经确定了arguments的值</span></span><br><span class="line">  <span class="comment">// arguments：函数参数的集合体</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">  age = <span class="number">20</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(name, age);</span><br><span class="line">  <span class="keyword">var</span> age;</span><br><span class="line"></span><br><span class="line">  bar(<span class="number">100</span>);</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(num);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><p>this 要在执行时才能确定值，定义时无法确认</p>
<ul>
<li>一个函数后面加<code>()</code>，即为要执行</li>
<li>在此之前，函数永远处于定义状态</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  name: <span class="string">"A"</span>,</span><br><span class="line">  fn: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;; <span class="comment">// 只看到这里不能确认this到底是什么</span></span><br><span class="line">a.fn(); <span class="comment">// this === a</span></span><br><span class="line">a.fn.call(&#123; <span class="attr">name</span>: <span class="string">"B"</span> &#125;); <span class="comment">// this === &#123;name: 'B'&#125;</span></span><br><span class="line"><span class="keyword">var</span> fn1 = a.fn;</span><br><span class="line">fn1(); <span class="comment">// this === window</span></span><br></pre></td></tr></table></figure>
<h3 id="作为构造函执行"><a href="#作为构造函执行" class="headerlink" title="作为构造函执行"></a>作为构造函执行</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// this = &#123;&#125;;</span></span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="comment">// return this;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> Foo(<span class="string">"zhangsan"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="作为对象属性执行"><a href="#作为对象属性执行" class="headerlink" title="作为对象属性执行"></a>作为对象属性执行</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">"A"</span>,</span><br><span class="line">  printName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name); <span class="comment">// this === obj</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">obj.printName();</span><br></pre></td></tr></table></figure>
<h3 id="作为普通函数执行"><a href="#作为普通函数执行" class="headerlink" title="作为普通函数执行"></a>作为普通函数执行</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// this === window</span></span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>
<h3 id="call-apply-bind"><a href="#call-apply-bind" class="headerlink" title="call apply bind"></a>call apply bind</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  alert(name);</span><br><span class="line">  alert(age);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// this === window</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// call表示&#123;x:100&#125;为this，'zhangsan'为第1个参数，20为第2个参数，最常用</span></span><br><span class="line">fn1.call(&#123; <span class="attr">x</span>: <span class="number">100</span> &#125;, <span class="string">"zhangsan"</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// apply将后面当做数组，相当于fn1.apply(&#123; x: 100 &#125;, ['zhangsan', 20]);</span></span><br><span class="line">fn1.apply(&#123; <span class="attr">x</span>: <span class="number">100</span> &#125;, <span class="string">"zhangsan"</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用bind修改默认this，.bind必须是函数表达式</span></span><br><span class="line"><span class="keyword">var</span> fn2 = <span class="function"><span class="keyword">function</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  alert(name);</span><br><span class="line">  alert(age);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;.bind(&#123; <span class="attr">y</span>: <span class="number">200</span> &#125;);</span><br><span class="line">fn2(<span class="string">"zhangsan"</span>, <span class="number">20</span>);</span><br></pre></td></tr></table></figure>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><ul>
<li>没有<strong>块级作用域</strong></li>
<li>但有<strong>函数</strong>和<strong>全局作用域</strong></li>
</ul>
<h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><ul>
<li>封装变量</li>
<li>收敛权限</li>
<li>在函数外面不可能修改掉函数中定义的变量的值，以保证数据的安全不被污染</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 没有块级作用域</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">// 在外面定义和定义在if语句块中是一样的</span></span><br><span class="line">  <span class="comment">// 尽量不要在块中定义变量，容易使程序不易读</span></span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">"zhangsan"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// 'zhangsan'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 但有函数和全局作用域</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">200</span>;</span><br><span class="line">  <span class="comment">// 函数中也有a，则使用函数中的a = 200</span></span><br><span class="line">  <span class="comment">// 函数中的变量值，外面是改不了的</span></span><br><span class="line">  <span class="comment">// 所以框架的第三方库就采用将变量定义在函数中的方法来防止变量被污染，与外面隔绝</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"fn"</span>, a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"global"</span>, a); <span class="comment">// 全局 a = 100</span></span><br><span class="line">fn(); <span class="comment">// 函数 a = 200</span></span><br></pre></td></tr></table></figure>
<h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><p><strong>是什么</strong></p>
<p>去父级作用域取值，根据调用回到变量定义或函数声明的地方的父作用域</p>
<p><strong>目的</strong></p>
<p>查找自由变量</p>
<p><strong>组合</strong></p>
<p>当前作用域没有定义的变量，即“自由变量”</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">200</span>;</span><br><span class="line">  <span class="comment">// a即为自由变量</span></span><br><span class="line">  <span class="built_in">console</span>.log(a); <span class="comment">// 去父级作用域取值，变量定义或函数声明时的父作用域</span></span><br><span class="line">  <span class="built_in">console</span>.log(b);</span><br><span class="line">&#125;</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">200</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="number">300</span>;</span><br><span class="line">    <span class="comment">// a是自由变量</span></span><br><span class="line">    <span class="comment">// 父级F1中a未定义，再在F1父级中找a，a = 100</span></span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">    <span class="comment">// b是自由变量</span></span><br><span class="line">    <span class="built_in">console</span>.log(b);</span><br><span class="line">    <span class="built_in">console</span>.log(c);</span><br><span class="line">  &#125;</span><br><span class="line">  F2();</span><br><span class="line">&#125;</span><br><span class="line">F1();</span><br></pre></td></tr></table></figure>
<h3 id="闭包使用场景"><a href="#闭包使用场景" class="headerlink" title="闭包使用场景"></a>闭包使用场景</h3><p>函数作为返回值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// a是F1局部变量</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line">  <span class="comment">// 返回一个函数（函数作为返回值）</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// a是个自由变量</span></span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">// 去父级作用域取值，声明时的父作用域</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1 = F1();</span><br><span class="line"><span class="comment">// a是全局变量，不会影响到函数中定义的局部变量</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">200</span>;</span><br><span class="line"><span class="comment">// 不是看此处执行时的作用域，而是回到其定义处的作用域</span></span><br><span class="line">f1(); <span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<p>函数作为参数传递</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// a是F1局部变量</span></span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line">  <span class="comment">// 返回一个函数（函数作为返回值）</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// a是个自由变量</span></span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">// 去父级作用域取值，声明时的父作用域</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1 = F1();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F2</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">200</span>;</span><br><span class="line">  fn(); <span class="comment">// 此处为执行作用域</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">F2(f1);</span><br></pre></td></tr></table></figure>
<h2 id="题目解答-2"><a href="#题目解答-2" class="headerlink" title="题目解答"></a>题目解答</h2><blockquote>
<ol>
<li>说一下变量提升的理解</li>
</ol>
</blockquote>
<ul>
<li>变量定义</li>
<li>函数声明（注意和函数表达式的区别）</li>
</ul>
<blockquote>
<ol start="2">
<li>说明 this 几种不同的使用场景</li>
</ol>
</blockquote>
<ul>
<li>构造函数</li>
<li>对象属性</li>
<li>普通函数</li>
<li>call apply bind</li>
</ul>
<blockquote>
<ol start="3">
<li>创建 10 个<code>&lt;a&gt;</code>标签，点击的时候弹出来对应的序号</li>
</ol>
</blockquote>
<p>错误写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i, a;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  a = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span><br><span class="line">  a.innerHTML = i + <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">  a.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="comment">// i是自由变量，要去父作用域获取值，无块级作用域（for），即要找全局作用域</span></span><br><span class="line">    alert(i);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>正确写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// 自执行函数，不用调用，只要定义完成，立即执行的函数</span></span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 函数作用域</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span><br><span class="line">    a.innerHTML = i + <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">    a.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      e.preventDefault();</span><br><span class="line">      <span class="comment">// i是自由变量，要去父作用域获取值，无块级作用域（for），即要找全局作用域</span></span><br><span class="line">      alert(i);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(a);</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="4">
<li>如何理解作用域</li>
</ol>
</blockquote>
<ul>
<li>自由变量</li>
<li>作用域链，即自由变量的查找</li>
<li>闭包的两个场景</li>
</ul>
<blockquote>
<ol start="5">
<li>实际开发中闭包的应用</li>
</ol>
</blockquote>
<ul>
<li>闭包实际应用主要用于封装变量，收敛权限</li>
<li>闭包的意义：你在 isFirstLoad()函数外面，根本不可能修改掉_list 的值，以保证数据的安全不被污染</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFirstLoad</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// _list表示是私有的</span></span><br><span class="line">  <span class="keyword">var</span> _list = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (_list.indexOf(id) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      _list.push(id);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> firstLoad = isFirstLoad();</span><br><span class="line">firstLoad(<span class="number">10</span>); <span class="comment">// true</span></span><br><span class="line">firstLoad(<span class="number">10</span>); <span class="comment">// false</span></span><br><span class="line">firstLoad(<span class="number">20</span>); <span class="comment">// true</span></span><br><span class="line">firstLoad(<span class="number">20</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h1 id="四、异步和单线程"><a href="#四、异步和单线程" class="headerlink" title="四、异步和单线程"></a>四、异步和单线程</h1><hr>
<blockquote>
<ol>
<li>同步和异步的区别是什么？分别举例</li>
<li>一个关于 setTimeout 的笔试题</li>
<li>前端使用异步的场景有哪些</li>
</ol>
</blockquote>
<h2 id="什么是异步（对比同步）"><a href="#什么是异步（对比同步）" class="headerlink" title="什么是异步（对比同步）"></a>什么是异步（对比同步）</h2><p>判断有没有阻塞</p>
<ul>
<li>异步：无阻塞，我走我的，走完之后回来再说，等着执行，但是不卡在那儿，<strong>等着但不闲着</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">100</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">200</span>); <span class="comment">// 未阻塞，没有在这儿停顿1s并打印200</span></span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">300</span>);</span><br><span class="line"><span class="comment">// 100 300 200</span></span><br></pre></td></tr></table></figure>
<ul>
<li>同步：有阻塞，会阻塞下面代码的执行</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">100</span>);</span><br><span class="line">alert(<span class="number">200</span>); <span class="comment">// 1秒后点击确认</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">300</span>);</span><br></pre></td></tr></table></figure>
<h2 id="前端使用异步的场景"><a href="#前端使用异步的场景" class="headerlink" title="前端使用异步的场景"></a>前端使用异步的场景</h2><p>在可能发生等待的情况，等待过程中不能像 alert 一样阻塞程序运行，因此，<strong><em>所有的</em>等待情况都需要异步</strong></p>
<ul>
<li>定时任务：setTimeout、setInterval</li>
<li>网络请求：Ajax 请求（请求 Google CDN），动态<code>&lt;img&gt;</code>加载</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Ajax请求demo</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"start"</span>);</span><br><span class="line">$.<span class="keyword">get</span>("./data1.json", function (data1) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data1);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"end"</span>);</span><br><span class="line"><span class="comment">// start end 等待Ajax执行</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;img&gt;加载demo</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"start"</span>);</span><br><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"loaded"</span>);</span><br><span class="line">&#125;;</span><br><span class="line">img.src = <span class="string">"/xxx.png"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"end"</span>);</span><br><span class="line"><span class="comment">// start end 等待图片加载</span></span><br></pre></td></tr></table></figure>
<ul>
<li>事件绑定</li>
</ul>
<p>可执行多次，可以点击再点击，而前 2 个场景只能执行 1 次</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 事件绑定demo</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"start"</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"btn1"</span>).addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">"clicked"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"end"</span>);</span><br><span class="line"><span class="comment">// start end 等待元素点击事件发生</span></span><br></pre></td></tr></table></figure>
<h2 id="异步和单线程的实现原理"><a href="#异步和单线程的实现原理" class="headerlink" title="异步和单线程的实现原理"></a>异步和单线程的实现原理</h2><h3 id="执行顺序-demo"><a href="#执行顺序-demo" class="headerlink" title="执行顺序 demo"></a>执行顺序 demo</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">100</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">200</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">300</span>);</span><br></pre></td></tr></table></figure>
<ol>
<li>执行第一行，打印 100</li>
<li>执行 setTimeout 后，传入 setTimeout 的函数会被暂存起来，不会立即执行</li>
</ol>
<p><strong>单线程的特点，不能同时干两件事</strong></p>
<ol start="3">
<li>执行最后一行，打印 300</li>
<li>待所有程序执行完，处于空闲状态时，会立马看有没有暂存起来的任务要执行</li>
<li>发现暂存起来的 setTimeout 中的函数无需等待时间，就立即来过来执行</li>
</ol>
<h3 id="执行顺序原理"><a href="#执行顺序原理" class="headerlink" title="执行顺序原理"></a>执行顺序原理</h3><ul>
<li><strong>所有异步</strong>中的函数都会被拿出去暂时不执行，让它们等待</li>
</ul>
<ol>
<li>所有的异步都是有函数的</li>
<li>只是暂存，并不排成队列</li>
</ol>
<ul>
<li>所有同步任务执行完后，要看边上有没有等待的程序在执行</li>
<li>所有异步等待的任务，<strong>同时</strong>判断是否满足以下条件，<strong>不管排队或者代码书写先后</strong></li>
</ul>
<ol>
<li>是否有等待时间</li>
<li>发送的请求是否正确返回</li>
<li>绑定事件是否发生</li>
</ol>
<ul>
<li>若有，则被封禁，等待事件发生时解禁执行异步任务</li>
<li>若无，则一直处于解禁状态，直接执行等待的异步任务</li>
</ul>
<h3 id="什么是单线程"><a href="#什么是单线程" class="headerlink" title="什么是单线程"></a>什么是单线程</h3><ul>
<li>单线程一次只能干一件事，只能一个一个任务排队来，不能同时执行两个任务</li>
<li>JavaScript 是单线程的，但是又不能让程序阻塞卡顿，所以必须异步</li>
</ul>
<h2 id="题目解答-3"><a href="#题目解答-3" class="headerlink" title="题目解答"></a>题目解答</h2><blockquote>
<ol>
<li>同步和异步的区别是什么？分别举例</li>
</ol>
</blockquote>
<ul>
<li>同步会<strong>阻塞</strong>代码执行，而异步不会</li>
<li>alert 是同步，setTimeout 是异步</li>
</ul>
<blockquote>
<ol start="2">
<li>一个关于 setTimeout 的笔试题</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span>);</span><br><span class="line"><span class="comment">// 1 3 5 2 1s后打印4</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="3">
<li>前端使用异步的场景有哪些</li>
</ol>
</blockquote>
<ul>
<li>定时任务：setTimeout、setInverval</li>
<li>网络请求：Ajax 请求、动态<code>&lt;img&gt;</code>加载</li>
<li>事件绑定</li>
</ul>
<h1 id="五、其它（如日期、Math、各种常用-API）"><a href="#五、其它（如日期、Math、各种常用-API）" class="headerlink" title="五、其它（如日期、Math、各种常用 API）"></a>五、其它（如日期、Math、各种常用 API）</h1><hr>
<blockquote>
<ol>
<li>获取 2017-06-10 格式的日期</li>
<li>获取随机数，要求是长度一致的字符串格式</li>
<li>写一个能遍历对象和数组的通用 forEach 函数</li>
</ol>
</blockquote>
<h2 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Date是个构造函数</span></span><br><span class="line"><span class="comment">// now是个属性，但也是个函数</span></span><br><span class="line"><span class="comment">// 所以Date.now()也是个函数</span></span><br><span class="line"><span class="comment">// 1552272178876</span></span><br><span class="line"><span class="comment">// 获取当前时间毫秒数</span></span><br><span class="line"><span class="built_in">Date</span>.now();</span><br><span class="line"><span class="comment">// Mon Mar 11 2019 10:42:17 GMT+0800 (CST)</span></span><br><span class="line"><span class="comment">// 会自动执行toString()，转化为字符串格式</span></span><br><span class="line"><span class="keyword">var</span> dt = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">dt.getTime(); <span class="comment">// 获取毫秒数</span></span><br><span class="line">dt.getFullYear(); <span class="comment">// 年</span></span><br><span class="line">dt.getMonth(); <span class="comment">// 月（0-11）从0开始的，比较特殊，需要+1</span></span><br><span class="line">dt.getDate(); <span class="comment">// 日（0-31）</span></span><br><span class="line">dt.getHours(); <span class="comment">// 小时（0-23）</span></span><br><span class="line">dt.getMinutes(); <span class="comment">// 分钟（0-59）</span></span><br><span class="line">dt.getSeconds(); <span class="comment">// 秒（0-59）</span></span><br></pre></td></tr></table></figure>
<h2 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h2><ul>
<li>获取随机数 Math.random()</li>
<li>返回 0-1 之间的一个小数，位数不确定，一般很长，一般不会重复</li>
<li>常用于清除缓存</li>
</ul>
<h2 id="数组-API"><a href="#数组-API" class="headerlink" title="数组 API"></a>数组 API</h2><h3 id="forEach：遍历数组中所有元素"><a href="#forEach：遍历数组中所有元素" class="headerlink" title="forEach：遍历数组中所有元素"></a>forEach：遍历数组中所有元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>];</span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 值，索引</span></span><br><span class="line">  <span class="comment">// 遍历数组的所有元素</span></span><br><span class="line">  <span class="comment">// item对应"a", "b", "c"</span></span><br><span class="line">  <span class="comment">// index对应0, 1, 2</span></span><br><span class="line">  <span class="built_in">console</span>.log(index, item);</span><br><span class="line">  <span class="comment">// 0 "a"</span></span><br><span class="line">  <span class="comment">// 1 "b"</span></span><br><span class="line">  <span class="comment">// 2 "c"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="every：判断所有元素是否都符合条件"><a href="#every：判断所有元素是否都符合条件" class="headerlink" title="every：判断所有元素是否都符合条件"></a>every：判断所有元素是否都符合条件</h3><p>返回 true 或 false</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.every(<span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 用来判断所有的数组元素，都满足一个条件</span></span><br><span class="line">  <span class="keyword">if</span> (item &lt; <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="some：判断是否有至少一个元素符合条件"><a href="#some：判断是否有至少一个元素符合条件" class="headerlink" title="some：判断是否有至少一个元素符合条件"></a>some：判断是否有至少一个元素符合条件</h3><p>返回 true 或 false</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.some(<span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 用来判断所有的数组元素，只要有一个满足条件即可</span></span><br><span class="line">  <span class="keyword">if</span> (item &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="sort：排序"><a href="#sort：排序" class="headerlink" title="sort：排序"></a>sort：排序</h3><ul>
<li>改变原数组</li>
<li>可对真实数据大小进行排序而不是 ACSII 码</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 从小到大</span></span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">  <span class="comment">// 从大到小</span></span><br><span class="line">  <span class="keyword">return</span> b - a;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(arr2);</span><br></pre></td></tr></table></figure>
<h3 id="map：对元素重新组装"><a href="#map：对元素重新组装" class="headerlink" title="map：对元素重新组装"></a>map：对元素重新组装</h3><ul>
<li>不改变原数组</li>
<li>返回符合条件的数组</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.map(<span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 将元素重新组装，并返回</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"&lt;b&gt;"</span> + item + <span class="string">"&lt;/b&gt;"</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(arr2);</span><br></pre></td></tr></table></figure>
<h3 id="fileter：过滤符合条件的元素"><a href="#fileter：过滤符合条件的元素" class="headerlink" title="fileter：过滤符合条件的元素"></a>fileter：过滤符合条件的元素</h3><ul>
<li>不改变原数组</li>
<li>返回符合条件的数组</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item, index</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 通过某一个条件过滤数组</span></span><br><span class="line">  <span class="keyword">if</span> (item &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(arr2);</span><br></pre></td></tr></table></figure>
<h2 id="对象-API"><a href="#对象-API" class="headerlink" title="对象 API"></a>对象 API</h2><h3 id="for-in：遍历对象中所有属性"><a href="#for-in：遍历对象中所有属性" class="headerlink" title="for in：遍历对象中所有属性"></a>for in：遍历对象中所有属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  x: <span class="number">100</span>,</span><br><span class="line">  y: <span class="number">200</span>,</span><br><span class="line">  z: <span class="number">300</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> key;</span><br><span class="line"><span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="comment">// key就是obj的属性名，即x, y, z</span></span><br><span class="line">  <span class="comment">// 注意这里的hasOwnProperty,在讲原型链时候讲过</span></span><br><span class="line">  <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key, obj[key]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x 100</span></span><br><span class="line"><span class="comment">// y 200</span></span><br><span class="line"><span class="comment">// z 300</span></span><br></pre></td></tr></table></figure>
<h2 id="题目解答-4"><a href="#题目解答-4" class="headerlink" title="题目解答"></a>题目解答</h2><blockquote>
<ol>
<li>获取 2017-06-10 格式的日期</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatDate</span>(<span class="params">dt</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!dt) &#123;</span><br><span class="line">    dt = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> year = dt.getFullYear();</span><br><span class="line">  <span class="keyword">var</span> month = dt.getMonth() + <span class="number">1</span>; <span class="comment">// 一定要+1</span></span><br><span class="line">  <span class="keyword">var</span> date = dt.getDate();</span><br><span class="line">  <span class="keyword">if</span> (month &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="comment">// 强制类型转换</span></span><br><span class="line">    month = <span class="string">"0"</span> + month;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (date &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="comment">// 强制类型转换</span></span><br><span class="line">    date = <span class="string">"0"</span> + date;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 强制类型转换</span></span><br><span class="line">  <span class="keyword">return</span> year + <span class="string">"-"</span> + month + <span class="string">"-"</span> + date;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> dt = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="keyword">var</span> date = formatDate(dt);</span><br><span class="line"><span class="built_in">console</span>.log(date);</span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="2">
<li>获取随机数，要求是长度一致的字符串格式</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 所有需要统一数字位数的情况都可以使用如下方法</span></span><br><span class="line"><span class="keyword">var</span> random = <span class="built_in">Math</span>.random();</span><br><span class="line"><span class="keyword">var</span> random = random + <span class="string">"0000000000"</span>; <span class="comment">// 后面加10个零</span></span><br><span class="line"><span class="keyword">var</span> random = random.slice(<span class="number">0</span>, <span class="number">10</span>); <span class="comment">// 取前10位</span></span><br><span class="line"><span class="built_in">console</span>.log(random);</span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="3">
<li>写一个能遍历对象和数组的通用 forEach 函数</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">forEach</span>(<span class="params">obj, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> key;</span><br><span class="line">  <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">    <span class="comment">// 准确判断是不是数组</span></span><br><span class="line">    obj.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>)) </span>&#123;</span><br><span class="line">      fn(index, item);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 不是数组就是对象</span></span><br><span class="line">    <span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      fn(key, obj[key]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="comment">// 注意，这里参数的顺序换了，为了和对象的遍历格式一致</span></span><br><span class="line">forEach(arr, <span class="function"><span class="keyword">function</span>(<span class="params">index, item</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index, item);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  x: <span class="number">100</span>,</span><br><span class="line">  y: <span class="number">200</span></span><br><span class="line">&#125;</span><br><span class="line">forEach(arr, <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="六、JS-Web-API-DOM-amp-BOM"><a href="#六、JS-Web-API-DOM-amp-BOM" class="headerlink" title="六、JS-Web-API DOM&amp;BOM"></a>六、JS-Web-API DOM&amp;BOM</h1><hr>
<blockquote>
<ol>
<li>DOM 是哪种基本的数据结构？</li>
<li>DOM 操作常用 API 有哪些？</li>
<li>DOM 节点的 attr 和 property 有何区别？</li>
<li>如何检测浏览器的类型？</li>
<li>拆解 URL 的各个部分</li>
</ol>
</blockquote>
<h2 id="回顾-JS-基础知识"><a href="#回顾-JS-基础知识" class="headerlink" title="回顾 JS 基础知识"></a>回顾 JS 基础知识</h2><p>特点：表面看来并不能用于工作中开发代码</p>
<ul>
<li>内置函数：Object、Array、Boolean、String 等</li>
<li>内置对象：Math、JSON 等</li>
<li>我们连在网页弹出一句 hello world 都不能实现</li>
</ul>
<p>常说的 JS（浏览器执行的 JS）包含两部分：JS 基础知识（ECMA262 标准）和 JS-Web-API（W3C 标准）</p>
<ul>
<li>JS 基础知识 ：ECMA262 标准，只是一个规则</li>
<li>JS-Web-API：W3C 标准，没有规定任何 JS 基础相关的东西，不管什么变量类型、原型、作用域和异步，只管定义用于浏览器中 JS 操作页面的 API 和全局变量</li>
<li>W3C 标准中关于 JS 的规定有：DOM 操作、BOM 操作、事件绑定、Ajax 请求（包括 http 协议）等</li>
<li>NodeJS 因为是基于 JS 所以符合 ECMA262 标准，但是其服务于服务器端，没有 window、document 等，而是有 network、service 等，不符合 W3C 标准</li>
</ul>
<p>全面考虑，JS 内置的全局函数和对象有哪些？</p>
<ul>
<li>之前讲过的 Object、Array、Boolean、String、Math、JSON</li>
<li>刚刚提到的 window、document</li>
<li>所有未定义的全局变量，如 navigator.userAgent</li>
</ul>
<h2 id="DOM-本质"><a href="#DOM-本质" class="headerlink" title="DOM 本质"></a>DOM 本质</h2><p>XML 是一种可扩展的描述语言，可以描述任何结构化的数据</p>
<ul>
<li>数据结构：树</li>
<li>HTML 是 XML 的一种特殊类型</li>
</ul>
<p>DOM：浏览器把拿到的 HTML 代码，结构化一个<strong>浏览器能识别</strong>并且<strong>JS 可操作</strong>的一个模型</p>
<ul>
<li>Document 文档</li>
<li>Object 对象</li>
<li>Modal 模型</li>
</ul>
<h2 id="DOM-节点操作"><a href="#DOM-节点操作" class="headerlink" title="DOM 节点操作"></a>DOM 节点操作</h2><h3 id="获取-DOM-节点"><a href="#获取-DOM-节点" class="headerlink" title="获取 DOM 节点"></a>获取 DOM 节点</h3><p><a href="https://juejin.im/post/5a7d8f325188257a6c690065" target="_blank" rel="noopener">QuerySelector/QuerySelectorAll 和 getElementById/getElementsByClassName 的区别</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// div1、divList、containerList、pList都是JS对象</span></span><br><span class="line"><span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>); <span class="comment">// 元素</span></span><br><span class="line"><span class="keyword">var</span> divList = <span class="built_in">document</span>.getElementByTagName(<span class="string">"div"</span>); <span class="comment">// 集合</span></span><br><span class="line"><span class="built_in">console</span>.log(divList.length);</span><br><span class="line"><span class="built_in">console</span>.log(divList[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> containerList = <span class="built_in">document</span>.getElementByClassName(<span class="string">".container"</span>); <span class="comment">// 集合</span></span><br><span class="line"><span class="keyword">var</span> pList = <span class="built_in">document</span>.querySelectorAll(<span class="string">"p"</span>); <span class="comment">// 集合</span></span><br></pre></td></tr></table></figure>
<h3 id="property"><a href="#property" class="headerlink" title="property"></a>property</h3><ul>
<li>文档直接修改，查看源码即可看到修改</li>
<li>修改的是 JS 对象的标准属性，有关 JS 的属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pList = <span class="built_in">document</span>.querySelectorAll(<span class="string">"p"</span>); <span class="comment">// 集合</span></span><br><span class="line"><span class="keyword">var</span> p = pList[<span class="number">0</span>];</span><br><span class="line"><span class="built_in">console</span>.log(p.style.width); <span class="comment">// 获取样式</span></span><br><span class="line">p.style.width = <span class="string">"100px"</span>; <span class="comment">// 修改样式</span></span><br><span class="line"><span class="built_in">console</span>.log(p.className); <span class="comment">// 获取class</span></span><br><span class="line">p.className = <span class="string">"p1"</span>; <span class="comment">// 修改class</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取nodeName和nodeType</span></span><br><span class="line"><span class="built_in">console</span>.log(p.nodeClass);</span><br><span class="line"><span class="built_in">console</span>.log(p.nodeType);</span><br></pre></td></tr></table></figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/20190316124944639.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<h3 id="Attribute"><a href="#Attribute" class="headerlink" title="Attribute"></a>Attribute</h3><ul>
<li>文档直接修改，查看源码即可看到修改</li>
<li>修改的是 HTML 代码文档内的标签，有关文档内标签的属性</li>
<li>setAttribute 原本没有的标签属性会自动添加</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pList = <span class="built_in">document</span>.querySelectorAll(<span class="string">"p"</span>); <span class="comment">// 集合</span></span><br><span class="line"><span class="keyword">var</span> p = pList[<span class="number">0</span>];</span><br><span class="line">p.getAttribute(<span class="string">"data-name"</span>);</span><br><span class="line">p.setAttribute(<span class="string">"data-name"</span>, <span class="string">"imooc"</span>);</span><br><span class="line">p.getAttribute(<span class="string">"style"</span>);</span><br><span class="line">p.setAttribute(<span class="string">"style"</span>, <span class="string">"font-size:30px;"</span>);</span><br></pre></td></tr></table></figure>
<h2 id="DOM-结构操作"><a href="#DOM-结构操作" class="headerlink" title="DOM 结构操作"></a>DOM 结构操作</h2><p>针对树的操作</p>
<h3 id="获取父元素"><a href="#获取父元素" class="headerlink" title="获取父元素"></a>获取父元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span><br><span class="line"><span class="keyword">var</span> parent = div1.parentElement;</span><br></pre></td></tr></table></figure>
<h3 id="获取子元素"><a href="#获取子元素" class="headerlink" title="获取子元素"></a>获取子元素</h3><p>在使用 childNodes 获取子元素时，换行也会算作 1 个 text，计为 1 个 Node</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/20190316141610797.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/2019031614163253.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/20190316141714170.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/20190316141727999.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span><br><span class="line"><span class="keyword">var</span> child = div1.childNodes;</span><br><span class="line"><span class="built_in">console</span>.log(child[<span class="number">0</span>].nodeType); <span class="comment">// text 3</span></span><br><span class="line"><span class="built_in">console</span>.log(child[<span class="number">1</span>].nodeType); <span class="comment">// p 1 标签都是1</span></span><br><span class="line"><span class="built_in">console</span>.log(child[<span class="number">0</span>].nodeName); <span class="comment">// text #text</span></span><br><span class="line"><span class="built_in">console</span>.log(child[<span class="number">1</span>].nodeName); <span class="comment">// p P</span></span><br></pre></td></tr></table></figure>
<h3 id="新增节点"><a href="#新增节点" class="headerlink" title="新增节点"></a>新增节点</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span><br><span class="line"><span class="comment">// 添加新节点</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="built_in">document</span>.createElement(<span class="string">"p"</span>);</span><br><span class="line">p1.innerHTML = <span class="string">"this is p1"</span>;</span><br><span class="line">div1.appendChild(p1); <span class="comment">// 添加新创建的元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 移动已有节点</span></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="built_in">document</span>.getElementById(<span class="string">"p2"</span>);</span><br><span class="line">div1.appendChild(p2);</span><br></pre></td></tr></table></figure>
<h3 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span><br><span class="line"><span class="keyword">var</span> child = div1.childNodes;</span><br><span class="line">div1.removeChild(child[<span class="number">0</span>]); <span class="comment">// 可能看不到效果，因为删除的child[0]可能是1个因换行引起的text Node</span></span><br></pre></td></tr></table></figure>
<h2 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h2><ul>
<li>Browser 浏览器</li>
<li>Object 对象</li>
<li>Model 模型</li>
</ul>
<h3 id="navigator"><a href="#navigator" class="headerlink" title="navigator"></a>navigator</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ua = navigator.userAgent;</span><br><span class="line"><span class="keyword">var</span> isChrome = ua.indexof(<span class="string">"Chrome"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(isChrome);</span><br></pre></td></tr></table></figure>
<h3 id="screen"><a href="#screen" class="headerlink" title="screen"></a>screen</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(screen.width);</span><br><span class="line"><span class="built_in">console</span>.log(screen.height);</span><br></pre></td></tr></table></figure>
<h3 id="location"><a href="#location" class="headerlink" title="location"></a>location</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(location.href); <span class="comment">// 整个url</span></span><br><span class="line">location.protocol; <span class="comment">//协议：http or https</span></span><br><span class="line">location.host; <span class="comment">// 域名</span></span><br><span class="line">location.pathname; <span class="comment">// 路径</span></span><br><span class="line">location.search; <span class="comment">// ?后的参数</span></span><br><span class="line">location.hash; <span class="comment">// #后面是哈希</span></span><br></pre></td></tr></table></figure>
<h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">history.back(); <span class="comment">// 返回</span></span><br><span class="line">history.forward(); <span class="comment">// 前进</span></span><br></pre></td></tr></table></figure>
<h2 id="题目解答-5"><a href="#题目解答-5" class="headerlink" title="题目解答"></a>题目解答</h2><blockquote>
<ol>
<li>DOM 是哪种基本的数据结构？</li>
</ol>
</blockquote>
<p>树</p>
<blockquote>
<ol start="2">
<li>DOM 操作常用 API 有哪些？</li>
</ol>
</blockquote>
<ul>
<li>获取 DOM 节点以及节点的 property 和 Attribute</li>
<li>获取父节点、子节点</li>
<li>新增节点和删除节点</li>
</ul>
<blockquote>
<ol start="3">
<li>DOM 节点的 attr 和 property 有何区别？</li>
</ol>
</blockquote>
<ul>
<li>property 只是一个 JS 对象的属性的修改和获取</li>
<li>Attribute 是对 HTML 标签属性的修改和获取</li>
</ul>
<blockquote>
<ol start="4">
<li>如何检测浏览器的类型？</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ua = navigator.userAgent;</span><br><span class="line"><span class="keyword">var</span> isChrome = ua.indexof(<span class="string">"Chrome"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(isChrome);</span><br></pre></td></tr></table></figure>
<blockquote>
<ol start="5">
<li>拆解 URL 的各个部分</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(location.href); <span class="comment">// 整个url</span></span><br><span class="line">location.protocol; <span class="comment">//协议：http or https</span></span><br><span class="line">location.host; <span class="comment">// 域名</span></span><br><span class="line">location.pathname; <span class="comment">// 路径</span></span><br><span class="line">location.search; <span class="comment">// ?后的参数</span></span><br><span class="line">location.hash; <span class="comment">// #后面是哈希</span></span><br></pre></td></tr></table></figure>
<h1 id="七、事件"><a href="#七、事件" class="headerlink" title="七、事件"></a>七、事件</h1><hr>
<blockquote>
<ol>
<li>编写一个通用的事件监听函数</li>
<li>描述事件冒泡过程</li>
<li>对于一个无限下拉加载图片的页面，如何给每个图片绑定事件</li>
</ol>
</blockquote>
<h2 id="通用事件绑定"><a href="#通用事件绑定" class="headerlink" title="通用事件绑定"></a>通用事件绑定</h2><p>关于低版本 IE 兼容性问题</p>
<ul>
<li>IE 低版本使用 attachEvent，和 W3C 标准不一样</li>
<li>IE 低版本使用量非常少，很多网站早已不支持</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">"btn1"</span>);</span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"clicked"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 封装</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindEvent</span>(<span class="params">elem, type, fn</span>) </span>&#123;</span><br><span class="line">  elem.addEventListener(type, fn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">document</span>.getElementById(<span class="string">"link1"</span>);</span><br><span class="line">bindEvent(a, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  e.preventDefault(); <span class="comment">// 阻止默认行为，比如：阻止a标签的跳转</span></span><br><span class="line">  alert(<span class="string">"clicked"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="事件冒泡"><a href="#事件冒泡" class="headerlink" title="事件冒泡"></a>事件冒泡</h2><ul>
<li>顺着 DOM 的顺序结构，底层叶节点的点击事件会一层一层根据顺序结构往其父元素上触发</li>
<li>点击 p1 后往上冒泡：触发 p1 的 click 事件 -&gt; 触发 div1 的 click 事件 -&gt; 触发 body 的 click 事件</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>激活<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p2"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p3"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p4"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p5"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p6"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> p1 = <span class="built_in">document</span>.getElementById(<span class="string">"p1"</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> body = <span class="built_in">document</span>.body;</span></span><br><span class="line"><span class="javascript">  bindEvent(p1, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    e.stopPropagation(); <span class="comment">// 阻止冒泡</span></span></span><br><span class="line"><span class="javascript">    alert(<span class="string">"激活"</span>);</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  bindEvent(body, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="string">"取消"</span>);</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2><p><strong>是什么</strong></p>
<p>事件冒泡的应用：通过事件冒泡机制，在元素的上层增加事件绑定机制，代理到每个元素上</p>
<p><strong>目的</strong></p>
<p>代码简洁，减少浏览器内存占用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>a1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>a2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>a3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>a4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 会随时新增更多a标签 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>);</span></span><br><span class="line"><span class="javascript">  div1.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> target = e.target;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (target.nodeName === <span class="string">"A"</span>) &#123;</span></span><br><span class="line"><span class="undefined">      alert(target.innerHTML);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>完善版本</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindEvent</span>(<span class="params">elem, type, selector, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (fn == <span class="literal">null</span>) &#123;</span><br><span class="line">    fn = selector;</span><br><span class="line">    selector = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  elem.addEventListener(type, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> target;</span><br><span class="line">    <span class="keyword">if</span> (selector) &#123;</span><br><span class="line">      target = e.target;</span><br><span class="line">      <span class="keyword">if</span> (target.matches(selector)) &#123;</span><br><span class="line">        fn.call(target, e); <span class="comment">// this = target</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fn(e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用代理</span></span><br><span class="line">bindEvent(a, <span class="string">"click"</span>, <span class="string">"a"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.innerHTML);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不使用代理</span></span><br><span class="line">bindEvent(a, <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.innerHTML);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="题目解答-6"><a href="#题目解答-6" class="headerlink" title="题目解答"></a>题目解答</h2><blockquote>
<ol>
<li>编写一个通用的事件监听函数</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>描述事件冒泡过程</li>
</ol>
</blockquote>
<p>DOM 树形结构 -&gt; 事件冒泡 -&gt; 阻止冒泡 -&gt; 冒泡的应用（代理）</p>
<blockquote>
<ol start="3">
<li>对于一个无限下拉加载图片的页面，如何给每个图片绑定事件</li>
</ol>
</blockquote>
<p>使用代理</p>
<h1 id="八、Ajax-amp-跨域"><a href="#八、Ajax-amp-跨域" class="headerlink" title="八、Ajax &amp; 跨域"></a>八、Ajax &amp; 跨域</h1><hr>
<blockquote>
<ol>
<li>手动编写一个 Ajax，不依赖第三方库</li>
<li>跨域的几种实现方式</li>
</ol>
</blockquote>
<h2 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h2><ul>
<li>IE 低版本使用 ActiveXObject，和 W3C 标准不同</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xhr.open(<span class="string">"GET"</span>, <span class="string">"/app"</span>, <span class="literal">false</span>); <span class="comment">// false 异步</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 这里的函数异步执行，可参考之前JS基础中的异步模块</span></span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.state == <span class="number">200</span>) &#123;</span><br><span class="line">      alert(xhr.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<h2 id="状态码说明"><a href="#状态码说明" class="headerlink" title="状态码说明"></a>状态码说明</h2><p>xhr.readyState == 4</p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>状态</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>未初始化</td>
<td>还没有调用 send()方法</td>
</tr>
<tr>
<td>1</td>
<td>载入</td>
<td>已调用 send()方法，正在发生请求</td>
</tr>
<tr>
<td>2</td>
<td>载入完成</td>
<td>send()方法执行完成，已接收到全部相应内容</td>
</tr>
<tr>
<td>3</td>
<td>交互</td>
<td>正在解析相应内容</td>
</tr>
<tr>
<td>4*</td>
<td>完成</td>
<td>响应内容解析完成，可以在客户端调用了</td>
</tr>
</tbody>
</table>
<p>xhr.status == 200</p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>2xx</td>
<td>表示成功处理请求，如 200</td>
</tr>
<tr>
<td>3xx</td>
<td>需要重定向，浏览器直接跳转</td>
</tr>
<tr>
<td>4xx</td>
<td>客户端请求错误，如 404</td>
</tr>
<tr>
<td>5xx</td>
<td>服务端错误</td>
</tr>
</tbody>
</table>
<h2 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h2><h3 id="什么是跨域"><a href="#什么是跨域" class="headerlink" title="什么是跨域"></a>什么是跨域</h3><p>浏览器有同源策略，不允许 Ajax 访问其他域接口</p>
<p>跨域条件</p>
<ul>
<li>协议</li>
<li>域名</li>
<li>端口（HTTP 默认 80；HTTPS 默认 443）</li>
</ul>
<p>有一个不同就算跨域</p>
<ul>
<li><a href="http://www.yourname.com/page1.html" target="_blank" rel="noopener">http://www.yourname.com/page1.html</a></li>
<li><a href="http://m.imooc.com/course/ajaxcourserecom?cid45" target="_blank" rel="noopener">http://m.imooc.com/course/ajaxcourserecom?cid45</a></li>
</ul>
<p>但是有三个标签允许跨域加载资源</p>
<ul>
<li><code>&lt;img src = xxx&gt;</code>用于打点统计，统计网站可能是其他域，防盗链</li>
<li><code>&lt;link href = xxx&gt;</code>、<code>&lt;script src = xxx&gt;</code>可以使用 CDN，CDN 的也是其他域</li>
<li><code>&lt;script src = xxx&gt;</code>script 可以用于 JSONP</li>
</ul>
<p>注意事项：</p>
<ul>
<li>所有跨域请求都必须经过信息提供方允许</li>
<li>如果未经允许即可获取，那是浏览器同源策略出现漏洞</li>
</ul>
<h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><h4 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h4><p>加载 <a href="http://codeing.m.imooc.com/classindex.html" target="_blank" rel="noopener">http://codeing.m.imooc.com/classindex.html</a></p>
<ul>
<li>不一定服务器端真正有一个 classindex.html</li>
<li>服务器可以根据请求，动态生成一个文件，返回</li>
<li>同理于<code>&lt;script src = &#39;http://coding.m.imooc.com/api.js&#39;&gt;</code></li>
</ul>
<p>例如你的网站要跨域访问慕课网的一个接口</p>
<ul>
<li>慕课给你一个地址 <a href="http://coding.m.mooc.com/api.js" target="_blank" rel="noopener">http://coding.m.mooc.com/api.js</a></li>
<li>返回内容格式如<code>callback({x:100, y:200})</code>（可动态生成）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="built_in">window</span>.callback = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 这里是我们跨域得到的信息</span></span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="http:/</span><span class="regexp">/coding.m.imooc.com/</span>api.js<span class="string">"&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="服务器端设置-http-header"><a href="#服务器端设置-http-header" class="headerlink" title="服务器端设置 http header"></a>服务器端设置 http header</h4><p>跨域趋势，简洁方法，服务端设置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">response.setHeader(<span class="string">"Access-Control-Allow-Origin"</span>, <span class="string">"http://a.com"</span>);</span><br><span class="line">response.setHeader(<span class="string">"Access-Control-Allow-Headers"</span>, <span class="string">"X-Requestd-Width"</span>);</span><br><span class="line">response.setHeader(</span><br><span class="line">  <span class="string">"Access-Control-Allow-Method"</span>,</span><br><span class="line">  <span class="string">"PUT,POST,GET,DELETE,OPTIONS"</span></span><br><span class="line">);</span><br><span class="line">response.setHeader(<span class="string">"Access-Control-Allow-Credentials"</span>, <span class="string">"true"</span>); <span class="comment">// 接受宽裕的cookie</span></span><br></pre></td></tr></table></figure>
<h2 id="题目解答-7"><a href="#题目解答-7" class="headerlink" title="题目解答"></a>题目解答</h2><blockquote>
<ol>
<li>手动编写一个 Ajax，不依赖第三方库</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>跨域的几种实现方式</li>
</ol>
</blockquote>
<ul>
<li>JSONP</li>
<li>服务器端设置 http header</li>
</ul>
<h1 id="九、存储"><a href="#九、存储" class="headerlink" title="九、存储"></a>九、存储</h1><hr>
<blockquote>
<ol>
<li>请描述下 cookie、sessionStorage 和 localStorage 的区别</li>
</ol>
</blockquote>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><ul>
<li>本身用于客户端和服务端通讯</li>
<li>但它有本地存储的功能，于是就被借用了</li>
<li>使用<code>document.cookie = xxx</code>获取修改即可</li>
</ul>
<p>缺点</p>
<ul>
<li>存储量太小，4kb</li>
<li>所有 http/Ajax 请求都带着，影响获取资源效率</li>
<li>API 简单，需要封装才能用 document.cookie</li>
</ul>
<h2 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h2><ul>
<li>HTML5 专门为存储而设计，最大容量 5M</li>
<li>API 简单易用</li>
<li>iOS safari 隐藏模式下，<code>localstorage.getItem</code>会报错，建议统一使用 try-catch 封装</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">localStorage.setItem(key, value);</span><br><span class="line">localStorage.getItem(key);</span><br></pre></td></tr></table></figure>
<h2 id="sessionStorage"><a href="#sessionStorage" class="headerlink" title="sessionStorage"></a>sessionStorage</h2><ul>
<li>HTML5 专门为存储而设计，最大容量 5M</li>
<li>API 简单易用</li>
<li>浏览器关了会清零</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sessionStorage.setItem(key, value);</span><br><span class="line">sessionStorage.getItem(key);</span><br></pre></td></tr></table></figure>
<h2 id="题目解答-8"><a href="#题目解答-8" class="headerlink" title="题目解答"></a>题目解答</h2><blockquote>
<ol>
<li>请描述下 cookie、sessionStorage 和 localStorage 的区别</li>
</ol>
</blockquote>
<ul>
<li>容量</li>
<li>是否会携带到 Ajax 中</li>
</ul>
<p>cookie 会携带，sessionStorage 和 localStorage 不会携带</p>
<ul>
<li>API 易用性</li>
</ul>
<h1 id="十、开发环境"><a href="#十、开发环境" class="headerlink" title="十、开发环境"></a>十、开发环境</h1><hr>
<h2 id="关于开发环境"><a href="#关于开发环境" class="headerlink" title="关于开发环境"></a>关于开发环境</h2><ul>
<li>面试官放通过开发环境了解面试者的经验</li>
<li>开发环境最能体现工作产出效率</li>
<li>会以聊天的形式为主，而不是出具体的问题</li>
<li>IDE（开发工具，写代码的效率）</li>
<li>Git（代码版本管理，多人协作开发）</li>
<li>JS 模块化</li>
<li>打包工具</li>
<li>上线回滚的流程</li>
</ul>
<h2 id="IDE"><a href="#IDE" class="headerlink" title="IDE"></a>IDE</h2><ul>
<li>webstorm</li>
<li>sublime</li>
<li>vscode</li>
<li>atom</li>
<li>插件</li>
</ul>
<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><ul>
<li>正式项目都需要代码版本管理</li>
<li>大型项目需要多人协作开发</li>
<li>Git 和 linux 是一个作者</li>
<li>网络 Git 服务器，如 coding.net 和 github.com</li>
<li>一般公司代码非开源，都有自己的 Git 服务器</li>
<li>搭建 Git 服务器无需了解太多</li>
</ul>
<p>Git 的基本操作必须很熟练</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>git status</td>
<td>查看状态</td>
</tr>
<tr>
<td>git diff</td>
<td>查看两个文件的不同</td>
</tr>
<tr>
<td>git checkout xxx (file name)</td>
<td>发现自己改错了，需要还原</td>
</tr>
<tr>
<td>git add .</td>
<td>将所有修改的东西全部囊括进来</td>
</tr>
<tr>
<td>git commit -m “xxx”</td>
<td>修改的内容提交到本地仓库，-m 代表添加的备注</td>
</tr>
<tr>
<td>git push origin master</td>
<td>提交到远程仓库</td>
</tr>
<tr>
<td>git pull origin master</td>
<td>别人修改代码，从远程下载已修改的代码</td>
</tr>
<tr>
<td>git clone</td>
<td>克隆新的项目</td>
</tr>
<tr>
<td>git branch</td>
<td>查看当前分支</td>
</tr>
<tr>
<td>git checkout -b xxx</td>
<td>新建一个分支</td>
</tr>
<tr>
<td>git checkout xxx (branch name)</td>
<td>切换到一个已有的分支</td>
</tr>
<tr>
<td>git merge xxx</td>
<td>合并分支</td>
</tr>
</tbody>
</table>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/20190321231209609.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo "# test" &gt;&gt; README.md</span><br><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m "first commit"</span><br><span class="line">git remote add origin git@github.com:kxbk100/test.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><h3 id="不使用模块化"><a href="#不使用模块化" class="headerlink" title="不使用模块化"></a>不使用模块化</h3><ul>
<li>依赖层级引用关系</li>
<li>代码中的函数必须是全局变量，才能暴露给使用方面，所以全局变量污染，不清楚各个文件间的依赖关系</li>
<li>a.js 知道要引用 a-util.js，但是不知道其还需要依赖 util.js</li>
</ul>
<p>util.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFormatDate</span>(<span class="params">date, type</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// type === 1 返回 2017-06-15</span></span><br><span class="line">  <span class="comment">// type === 2 返回 2017年6月15日</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>a-util.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">aGetFormatDate</span>(<span class="params">date</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 要求返回 2017年6月15日 格式</span></span><br><span class="line">  <span class="keyword">return</span> getFormatDate(date, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>a.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dt = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="built_in">console</span>.log(aGetFormatDate(dt));</span><br></pre></td></tr></table></figure>
<p>date.html</p>
<ul>
<li>顺序不能颠倒</li>
<li>3 个文件之间是强依赖关系</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"util.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"a-util.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"a.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="使用模块化"><a href="#使用模块化" class="headerlink" title="使用模块化"></a>使用模块化</h3><ul>
<li>只往外 s 输出 1 个函数</li>
<li>在另一个文件中再接收</li>
<li>直接<code>&lt;script src=&quot;a.js&quot;&gt;&lt;/script&gt;</code> ，其他的根据依赖关系自动引用</li>
<li>前 2 个函数，没必要做成全局变量，不会带来污染和覆盖</li>
</ul>
<p>util.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  getFormatDate: <span class="function"><span class="keyword">function</span>(<span class="params">date, type</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// type === 1 返回 2017-06-15</span></span><br><span class="line">    <span class="comment">// type === 2 返回 2017年6月15日</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>a-util.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getFormatDate = <span class="built_in">require</span>(<span class="string">'util.js'</span>);</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  aGetFormatDate: <span class="function"><span class="keyword">function</span> (<span class="params">date</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 要求返回 2017年6月15日 格式</span></span><br><span class="line">    <span class="keyword">return</span> getFormatDate(date, <span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>a.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> aGetFormatDate = <span class="built_in">require</span>(<span class="string">"a-util.js"</span>);</span><br><span class="line"><span class="keyword">var</span> dt = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="built_in">console</span>.log(aGetFormatDate(dt));</span><br></pre></td></tr></table></figure>
<h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><ul>
<li>异步模块定义</li>
<li>require.js</li>
<li>全局定义 define 函数</li>
<li>全局定义 require 函数</li>
<li>依赖 js 会自动、异步加载，不使用就不加载，提升性能</li>
<li>return 一个对象</li>
<li>只有先 define 才能被 require</li>
</ul>
<p>util.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    getFormateDate: <span class="function"><span class="keyword">function</span> (<span class="params">date, type</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (type == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"2017-06-15"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (type == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"2017年6月15日"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>a-util.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">"./util.js"</span>], <span class="function"><span class="keyword">function</span> (<span class="params">util</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    aGetFormatDate: <span class="function"><span class="keyword">function</span> (<span class="params">date</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> util.getFormatDate(date, <span class="number">2</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>a.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">"./a-util.js"</span>], <span class="function"><span class="keyword">function</span> (<span class="params">aUtil</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    printDate: <span class="function"><span class="keyword">function</span> (<span class="params">date</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(aUtil.aGetFormatDate);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>main.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">"./a.js"</span>], <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  a.printDate(date);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>main.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/require.min.js"</span> <span class="attr">data-main</span>=<span class="string">"./main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">// 定义程序入口</span><br></pre></td></tr></table></figure>
<hr>
<p>a.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">"./util.js"</span>], <span class="function"><span class="keyword">function</span> (<span class="params">util</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    aGetFormateDate: <span class="function"><span class="keyword">function</span> (<span class="params">date</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> util.getFormateDate();</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>main.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">"./a.js"</span>], <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    printDate: <span class="function"><span class="keyword">function</span> (<span class="params">date</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(autil.aGetFormateDate(date));</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><ul>
<li>nodejs 模块化规范，现在被大量用于前端</li>
<li>前端开发依赖的插件和库，都可以从 npm 中获取</li>
<li>构建工具的高度自动化，使得使用 npm 的成本非常低</li>
<li>CommonJS 不会异步加载 JS，而是同步一次性加载进来</li>
<li>exports 输出出一个东西，var require 接收一个东西</li>
</ul>
<p>util.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  getFormateDate: <span class="function"><span class="keyword">function</span> (<span class="params">date, type</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"2017-06-15"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"2017年6月15日"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>a-uril.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">"util.js"</span>);</span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">  aGetFormateDate: <span class="function"><span class="keyword">function</span> (<span class="params">date</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> util.getFormateDate(date, <span class="number">2</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="AMD-和-CommonJS-的使用场景"><a href="#AMD-和-CommonJS-的使用场景" class="headerlink" title="AMD 和 CommonJS 的使用场景"></a>AMD 和 CommonJS 的使用场景</h3><ul>
<li>需要异步加载，用 AMD</li>
<li>不需要异步加载 JS，用 CommonJS</li>
<li>使用 npm 之后使用 CommonJS</li>
</ul>
<h2 id="构建工具-对模块化的代码打包和压缩"><a href="#构建工具-对模块化的代码打包和压缩" class="headerlink" title="构建工具(对模块化的代码打包和压缩)"></a>构建工具(对模块化的代码打包和压缩)</h2><p>构建工具</p>
<ul>
<li>grunt（没人用）</li>
<li>gulp</li>
<li>fis3</li>
<li>webpack</li>
</ul>
<p>构建的意义</p>
<ul>
<li>模块化打包</li>
<li>支持 CommonJS</li>
<li>CommonJS 受 nodeJS 支持</li>
<li>后端放到前端来用需要兼容</li>
<li>webpack 封装了很多方法，支持通过 CommonJS 的方式来运行在前端</li>
</ul>
<p>安装 -&gt; 配置 -&gt; 处理一个简单事例 -&gt; 得到结果</p>
<h3 id="安装-nodeJS"><a href="#安装-nodeJS" class="headerlink" title="安装 nodeJS"></a>安装 nodeJS</h3><ol>
<li>安装 Node.js</li>
<li>进入文件目录</li>
<li>初次使用安装 http-server <code>sudo npm install http-server -g</code></li>
<li>使用<code>http-server -p 8881</code>生成服务</li>
</ol>
<p>这个服务只能针对静态页面的编辑，nodejs 或者 php 的修改无法使用</p>
<h3 id="安装-webpack"><a href="#安装-webpack" class="headerlink" title="安装 webpack"></a>安装 webpack</h3><ol>
<li>进入文件目录</li>
<li>初始化环境<code>npm init</code></li>
<li>自动生成 package.json 文件</li>
</ol>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/images/2019032212273325.png#alt=" alt title>
                </div>
                <div class="image-caption"></div>
            </figure>
<ol start="4">
<li><p>安装包<code>npm install webpack --save-dev</code>，<code>-dev</code>表示仅用于开发环境</p>
</li>
<li><p>安装包<code>npm install jquery --save</code>，任何环境都需要</p>
</li>
<li><p>卸载包<code>npm uninstall moment --save</code></p>
</li>
</ol>
<h3 id="配置-webpack"><a href="#配置-webpack" class="headerlink" title="配置 webpack"></a>配置 webpack</h3><ol>
<li>新建 webpack.config.js，与 index.html 和 package.json 同级</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  context: path.resolve(__dirname, <span class="string">"./src"</span>), <span class="comment">// __dirname：前端目录</span></span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: <span class="string">"./app.js"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"./dist"</span>),</span><br><span class="line">    filename: <span class="string">"bundle.js"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>新建 src 文件夹，在其中创建 app.js 入口文件</li>
<li>在 package.json 的 script 中新增</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"start": "webpack" // 将start指定为webpack</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>在 index.html 中，引入 bundle.js</li>
<li>访问页面</li>
</ol>
<h3 id="使用-jQuery"><a href="#使用-jQuery" class="headerlink" title="使用 jQuery"></a>使用 jQuery</h3><ol>
<li>在 app.js 中添加</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">"jquery"</span>); <span class="comment">// 它会从package.json中的dependencies中查找安装的jQuery</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>自己写模块可以根据相对路径获取</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> aUtil = <span class="built_in">require</span>(<span class="string">"./a-util.js"</span>);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><code>npm start</code>打包</li>
</ol>
<h3 id="压缩-jQuery"><a href="#压缩-jQuery" class="headerlink" title="压缩 jQuery"></a>压缩 jQuery</h3><ol>
<li>安装 UglifyJS Webpack Plugin</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> npm install uglifyjs-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>修改 webpack.config.json 如下</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</span><br><span class="line"><span class="keyword">var</span> uglifyJsPlugin = <span class="built_in">require</span>(<span class="string">"uglifyjs-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  context: path.resolve(__dirname, <span class="string">"./src"</span>), <span class="comment">// __dirname：前端目录</span></span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: <span class="string">"./app.js"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"./dist"</span>),</span><br><span class="line">    filename: <span class="string">"bundle.js"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//压缩js</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="keyword">new</span> uglifyJsPlugin(&#123;</span><br><span class="line">        uglifyOptions: &#123;</span><br><span class="line">          compress: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><code>npm start</code>打包</li>
</ol>
<h2 id="上限回滚流程"><a href="#上限回滚流程" class="headerlink" title="上限回滚流程"></a>上限回滚流程</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><ul>
<li>是非常重要的开发环节</li>
<li>各个公司的具体流程不同</li>
<li>由专门的工具负责系统完成，我们无需关心细节</li>
<li>如果没有参与过，面试时也要说出要点</li>
<li>只讲要点，具体实现无法讲解</li>
</ul>
<h3 id="上线和回滚的基本流程"><a href="#上线和回滚的基本流程" class="headerlink" title="上线和回滚的基本流程"></a>上线和回滚的基本流程</h3><p>上线</p>
<ul>
<li>将测试完成的代码提交到 git 版本库的 master 分支</li>
<li>将当前服务器的代码全部打包并记录版本号（1.0），备份</li>
<li>将 master 分支的代码提交到服务器覆盖到线上服务器，生成新版本号（1.1）</li>
</ul>
<p>回滚</p>
<ul>
<li>将当前服务器的代码打包并记录版本号（1.1），备份</li>
<li>将备份的上一个版本号解压（1.0），覆盖到线上服务器，并生成新的版本号（1.2）</li>
</ul>
<h3 id="linux-基本命令"><a href="#linux-基本命令" class="headerlink" title="linux 基本命令"></a>linux 基本命令</h3><ul>
<li>服务器使用 Linux 居多，server 版，只有命令行</li>
<li>测试环境要匹配线上环境，因此也是 Linux</li>
<li>经常需要登录测试机来自己配置，获取数据</li>
</ul>
<p>常用命令</p>
<ul>
<li>mkdir a</li>
<li>ls</li>
<li>ll</li>
<li>cd a</li>
<li>pwd 查看路径</li>
<li>rm -rf a</li>
<li>vi a.js</li>
</ul>
<p>输入：i</p>
<p>保存：esc :w</p>
<p>退出：esc :q</p>
<p>保存并退出：esc :wq</p>
<ul>
<li>cat a.js 查看文件</li>
<li>cp a.js a1.js 拷贝</li>
<li>mv a1.js src/a1.js</li>
<li>rm a.js</li>
</ul>
<h1 id="十一、运行环境"><a href="#十一、运行环境" class="headerlink" title="十一、运行环境"></a>十一、运行环境</h1><hr>
<blockquote>
<ol>
<li>从输入 url 到得到 html 的详细过程</li>
<li>window.load 和 DOMContentLoaded 的区别</li>
</ol>
</blockquote>
<h2 id="页面加载过程"><a href="#页面加载过程" class="headerlink" title="页面加载过程"></a>页面加载过程</h2><ul>
<li>浏览器就可以通过访问链接来得到页面的内容</li>
<li>通过绘制和渲染，显示出页面的最终的样子</li>
</ul>
<h3 id="加载资源的形式"><a href="#加载资源的形式" class="headerlink" title="加载资源的形式"></a>加载资源的形式</h3><ul>
<li>输入 url 或跳转页面加载 html <a href="http://coding.m.imooc.com" target="_blank" rel="noopener">http://coding.m.imooc.com</a></li>
<li>加载 html 的静态资源<code>&lt;script src=&quot;jquery.js&quot;&gt;&lt;/script&gt;</code></li>
</ul>
<h3 id="加载一个资源的过程"><a href="#加载一个资源的过程" class="headerlink" title="加载一个资源的过程"></a>加载一个资源的过程</h3><ol>
<li>浏览器根据 DNS 服务器得到域名的 IP 地址</li>
<li>向这个 IP 的机器发送<strong>http 请求</strong></li>
<li>服务器收到处理并返回<strong>http 请求</strong></li>
<li>浏览器得到返回内容</li>
</ol>
<h3 id="浏览器渲染页面的过程"><a href="#浏览器渲染页面的过程" class="headerlink" title="浏览器渲染页面的过程"></a>浏览器渲染页面的过程</h3><ol>
<li>根据 HTML 结构生成 DOM Tree</li>
<li>根据 CSS 生成 CSSOM</li>
<li>将 DOM 和 CSSOM 整合形成 Render Tree（渲染树）</li>
<li>根据 Render Tree 开始渲染和展示</li>
<li>遇到<code>&lt;script&gt;</code>时，会执行并阻塞渲染</li>
</ol>
<p>因为 JS 会改变 DOM 结构及内容，所以两者不能同时进行</p>
<ul>
<li>将 CSS 放于 head 中，加载完 CSS 后浏览器直接知道规则，在渲染 body 中的元素时，已将 CSS 考虑进去渲染</li>
<li>将 CSS 放于 body 尾部，元素先按照默认加载，然后再根据 CSS 进行改变，性能较差</li>
<li>将 script 放于 body 尾部，可以拿到所有 DOM 标签和结构，不会阻塞 body 上面的元素的渲染，性能较优</li>
<li><code>&lt;p&gt;&lt;img src=&quot;XXX&quot; /&gt;&lt;/p&gt;</code>img DOM 元素会顺序生成，但图片 src 异步加载</li>
</ul>
<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><h3 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h3><ul>
<li>多使用内存、缓存或者其他方法</li>
<li>减少 CPU 计算、减少网络请求、减少 IO 操作（前端不考虑）</li>
</ul>
<h3 id="从哪里入手"><a href="#从哪里入手" class="headerlink" title="从哪里入手"></a>从哪里入手</h3><h4 id="加载页面和静态资源"><a href="#加载页面和静态资源" class="headerlink" title="加载页面和静态资源"></a>加载页面和静态资源</h4><p>静态资源的压缩合并（打包合并+代码压缩）</p>
<ul>
<li>手动合并效率低、会出错，一般用构建工具合并</li>
<li>3 个文件需要发 3 个请求，每个请求都会耗费很多时间</li>
<li>1 个文件只需发送 1 个请求</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"a.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"b.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"c.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">// 打包合并后</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"abc.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>静态资源缓存</p>
<ul>
<li>通过链接名称控制缓存，<code>&lt;script src=“abc_1.js”&gt;&lt;/script&gt;</code></li>
<li>只有内容改变的时候，链接名称才会改变，<code>&lt;script src=&quot;abc_2.js&quot;&gt;&lt;/script&gt;</code></li>
</ul>
<p>使用 CDN</p>
<ul>
<li>不同地域的资源优化</li>
<li>让资源加载更快</li>
</ul>
<p>使用 SSR 后端渲染</p>
<ul>
<li>现在 Vue React 提出了这样的概念</li>
<li>其实 jsp php asp 都属于后端渲染</li>
<li>数据直接输出到 HTML 中</li>
</ul>
<h4 id="页面渲染"><a href="#页面渲染" class="headerlink" title="页面渲染"></a>页面渲染</h4><p>CSS 放前面，js 放后面</p>
<p>懒加载</p>
<ul>
<li>图片懒加载、下拉加载更多</li>
<li>给 src 赋值一个很小的图</li>
<li>真正的图片放在一个 data 后面</li>
<li>用的时候再把 data 属性赋值到 src 中</li>
<li>加快页面渲染速度</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"img1"</span> <span class="attr">src</span>=<span class="string">"preview.png"</span> <span class="attr">data-realsrc</span>=<span class="string">"abc.png"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> img1 = <span class="built_in">document</span>.getElementById(<span class="string">"img1"</span>);</span></span><br><span class="line"><span class="javascript">  img1.src = img1.getAttribute(<span class="string">"data-realsrc"</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>减少 DOM 操作</p>
<ul>
<li>缓存 DOM 查询，减少 DOM 查询，对 DOM 查询做缓存</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 未缓存DOM查询</span></span><br><span class="line"><span class="keyword">var</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="built_in">document</span>.getElementsByTagName(<span class="string">"p"</span>).length; i++) &#123;</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 缓存了DOM查询</span></span><br><span class="line"><span class="keyword">var</span> pList = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"p"</span>);</span><br><span class="line"><span class="keyword">var</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pList.length; i++) &#123;</span><br><span class="line">  <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>合并 DOM 插入，减少 DOM 操作，多个操作尽量合并在一起执行</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> listNode = <span class="built_in">document</span>.getElementById(<span class="string">"list"</span>);</span><br><span class="line"><span class="comment">// 创建1个片段</span></span><br><span class="line"><span class="keyword">var</span> frag = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line"><span class="keyword">var</span> x, li;</span><br><span class="line"><span class="keyword">for</span> (x = <span class="number">0</span>; x &lt; <span class="number">10</span>; x++) &#123;</span><br><span class="line">  li = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span><br><span class="line">  li.innerHTML = <span class="string">"List item"</span> + x;</span><br><span class="line">  <span class="comment">// 插入片段</span></span><br><span class="line">  frag.appendChild(li);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 最后将片段直接插入正文</span></span><br><span class="line">listNode.appendChild(frag);</span><br></pre></td></tr></table></figure>
<p>事件节流</p>
<ul>
<li>合并频繁操作</li>
<li>很快的连着的操作，快速打字先不触发</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> textaarea = <span class="built_in">document</span>.getElementById(<span class="string">"text"</span>);</span><br><span class="line"><span class="keyword">var</span> timeoutId;</span><br><span class="line">textaarea.addEventListener(<span class="string">"keyup"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (timeoutId) &#123;</span><br><span class="line">    clearTimeout(timeoutId);</span><br><span class="line">  &#125;</span><br><span class="line">  timeoutId = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 触发change事件</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"用户停止打字，开始触发事件"</span>);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>尽早执行操作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 页面全部加载完之后才会执行，包括图片、视频等</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// DOM渲染完即可执行，此时图片、视频还可能没有加载完</span></span><br><span class="line">  <span class="comment">// jQuery、zepto均使用此方法</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h2><h3 id="XSS-跨站请求攻击"><a href="#XSS-跨站请求攻击" class="headerlink" title="XSS 跨站请求攻击"></a>XSS 跨站请求攻击</h3><ul>
<li>在新浪博客写一篇文章，同时偷偷插入一段<code>&lt;script&gt;</code></li>
<li>攻击代码中，获取 cookie，发送到自己的服务器</li>
<li>发布博客，有人查看博客内容</li>
<li>会把查看者的 cookie 发送到攻击者的服务器</li>
</ul>
<p>预防</p>
<ul>
<li>前端替换关键字，例如替换<code>&lt;</code>为<code>&lt;</code>、<code>&gt;</code>为<code>&gt;</code>（配合）</li>
<li>后端替换（建议）</li>
</ul>
<h3 id="CSRF-跨站请求伪造"><a href="#CSRF-跨站请求伪造" class="headerlink" title="CSRF 跨站请求伪造"></a>CSRF 跨站请求伪造</h3><ul>
<li>你已登录一个购物网站，正在浏览器商品</li>
<li>该网站付费接口是 xxx.com/pay?id=100 ，但是没有任何验证</li>
<li>然后你收到一封邮件，隐藏着<code>&lt;img src=xxx&gt;</code></li>
<li>你查看邮件的时候，就已经悄悄的付费购买了</li>
</ul>
<p>预防</p>
<ul>
<li>增加验证流程，如输入指纹、密码、短信验证码等</li>
</ul>
<h2 id="面试技巧"><a href="#面试技巧" class="headerlink" title="面试技巧"></a>面试技巧</h2><h3 id="简历"><a href="#简历" class="headerlink" title="简历"></a>简历</h3><ul>
<li>简洁明了，重点突出项目经历和解决方案</li>
<li>把个人博客放在简历中，并且定期维护更新博客</li>
<li>把个人的开源项目放在简历中，并维护开源项目</li>
<li>简历千万不要造假，要保持能力和经历上的真实性</li>
</ul>
<h3 id="过程中"><a href="#过程中" class="headerlink" title="过程中"></a>过程中</h3><ul>
<li>如何看待加班？加班就像借钱，救急不救穷</li>
<li>千万不可挑战面试官，不要反铐面试官</li>
<li>学会给面试官惊喜，但不要太多</li>
<li>遇到不会回答的问题，说出你知道的就可以</li>
<li>谈谈你的缺点：说说你最近正在学什么就可以了</li>
</ul>
<blockquote>
<p>可能对 React 不是很了解，最近正在学 React，大约 1 个月后就能做出 1 个 React 的网站</p>
</blockquote>
<h2 id="题目解答-9"><a href="#题目解答-9" class="headerlink" title="题目解答"></a>题目解答</h2><blockquote>
<ol>
<li>从输入 url 到得到 html 的详细过程</li>
</ol>
</blockquote>
<ul>
<li>浏览器根据 DNS 服务器得到域名的 IP 地址</li>
<li>向这个 IP 的机器发送 http 请求</li>
<li>服务器收到处理并返回 http 请求</li>
<li>浏览器得到返回内容</li>
</ul>
<blockquote>
<ol start="2">
<li>window.load 和 DOMContentLoaded 的区别</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 页面全部加载完之后才会执行，包括图片、视频等</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// DOM渲染完即可执行，此时图片、视频还可能没有加载完</span></span><br><span class="line">  <span class="comment">// jQuery、zepto均使用此方法</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2020-10-15T15:44:29.662Z" itemprop="dateUpdated">2020-10-15 23:44:29</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="http://fengtx.tk">
            <img src="/img/avatar.jpg" alt="冯天祥">
            冯天祥
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/&title=《【JavaScript】整理》 — 冯天祥&pic=http://fengtx.tk/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/&title=《【JavaScript】整理》 — 冯天祥&source=前端小白冯天祥的技术博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《【JavaScript】整理》 — 冯天祥&url=http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/&via=http://fengtx.tk" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2020/04/05/yuque/【JavaScript】ES6/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">【JavaScript】ES6</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2020/04/05/yuque/【JavaScript】原型与原型链/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">【JavaScript】原型与原型链</h4>
      </a>
    </div>
  
</nav>



    




















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢打赏
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>冯天祥 &copy; 2016 - 2020</span>
            <!-- <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span> -->
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/&title=《【JavaScript】整理》 — 冯天祥&pic=http://fengtx.tk/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/&title=《【JavaScript】整理》 — 冯天祥&source=前端小白冯天祥的技术博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《【JavaScript】整理》 — 冯天祥&url=http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/&via=http://fengtx.tk" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://fengtx.tk/2020/04/05/yuque/【JavaScript】整理/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACH0lEQVR42u3aS2rDQBAFQN//0sk2EGTe65ENmimtjG2kKS2a/r1e8fUTX3/////z1d3+//r6xIWBgfFYRn6s5Pvk0Fd3uHoFyVMwMDBOYFxFsOTW7wPrFSl/1vuzYWBgYMyO2AbW/LkYGBgYbcCdFZ9JEomBgYExK2Lb9C4P2V+txTEwMB7IyEPk9z9/ZL6BgYHxKMZPeSVFbN6ea4vhy1NhYGBszcgDXJuc3TVsKMpgDAyMrRl3NfpXCtr3/yxaexgYGFszZkeZDQPyO7ctPwwMjF0ZbZHZgmdJYZ2AYmBgbM3Iw+JKu61d4FhZGsPAwNiJMVubmKWPSUNtuCiGgYFxAKNN+PKg3AbrpYCLgYGxKSNvzedFbDRoLJFJ8oqBgbErIy8j8wPlpW9bxEYLYRgYGFszZgsW7fppi4mCMgYGxpGMu5K89qCzV4aBgbE3o03g2l+TEnQ2yMTAwDiZ0Tb9V8LoSrmLgYFxJiO/8vDappsrbAwMjHMYyYFmgXXW2hsGXAwMjK0Z+SBzVoi2r6wIuxgYGAcwVkLt+pBgBnvNslQMDIxHMVbK11nrP18IK1p+GBgYWzPya6VMzdPKomSdwTAwMB7LyEvT9dWupJSdjTkxMDBOYLS1773frKSeGBgYGDmpPXQe4qN8FgMDA6NdfYhHAuvLHBgYGOcw8hWKZGDQNuZaDAYGxmmMvHRMliRmvDzTu2G+gYGB8STGLwBDapgeG8TdAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
